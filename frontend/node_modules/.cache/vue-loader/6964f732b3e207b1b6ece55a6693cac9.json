{"remainingRequest":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/natalia/dev/tcc/projeto/frontend/src/components/admin/CategoryAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/natalia/dev/tcc/projeto/frontend/src/components/admin/CategoryAdmin.vue","mtime":1539007343000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJhc2VBcGlVcmwsIHNob3dFcnJvciB9IGZyb20gJ0AvZ2xvYmFsJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnQ2F0ZWdvcnlBZG1pbicsCiAgICBkYXRhOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBtb2RlOiAnc2F2ZScsCiAgICAgICAgICAgIGNhdGVnb3J5OiB7fSwKICAgICAgICAgICAgY2F0ZWdvcmllczogW10sCiAgICAgICAgICAgIGZpZWxkczogWwogICAgICAgICAgICAgICAgeyBrZXk6ICdpZCcsIGxhYmVsOiAnQ8OzZGlnbycsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgICAgICAgICB7IGtleTogJ25hbWUnLCBsYWJlbDogJ05vbWUnLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgeyBrZXk6ICdwYXRoJywgbGFiZWw6ICdDYW1pbmhvJywgc29ydGFibGU6IHRydWUgfSwKICAgICAgICAgICAgICAgIHsga2V5OiAnYWN0aW9ucycsIGxhYmVsOiAnQcOnw7VlcycgfQogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBsb2FkQ2F0ZWdvcmllcygpIHsKICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUFwaVVybH0vY2F0ZWdvcmllc2AKICAgICAgICAgICAgYXhpb3MuZ2V0KHVybCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgLy8gdGhpcy5jYXRlZ29yaWVzID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IHJlcy5kYXRhLm1hcChjYXRlZ29yeSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uY2F0ZWdvcnksIHZhbHVlOiBjYXRlZ29yeS5pZCwgdGV4dDogY2F0ZWdvcnkucGF0aCB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgcmVzZXQoKSB7CiAgICAgICAgICAgIHRoaXMubW9kZSA9ICdzYXZlJwogICAgICAgICAgICB0aGlzLmNhdGVnb3J5ID0ge30KICAgICAgICAgICAgdGhpcy5sb2FkQ2F0ZWdvcmllcygpCiAgICAgICAgfSwKICAgICAgICBzYXZlKCkgewogICAgICAgICAgICBjb25zdCBtZXRob2QgPSB0aGlzLmNhdGVnb3J5LmlkID8gJ3B1dCcgOiAncG9zdCcKICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmNhdGVnb3J5LmlkID8gYC8ke3RoaXMuY2F0ZWdvcnkuaWR9YCA6ICcnCiAgICAgICAgICAgIGF4aW9zW21ldGhvZF0oYCR7YmFzZUFwaVVybH0vY2F0ZWdvcmllcyR7aWR9YCwgdGhpcy5jYXRlZ29yeSkKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmdsb2JhbC5kZWZhdWx0U3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKHNob3dFcnJvcikKICAgICAgICB9LAogICAgICAgIHJlbW92ZSgpIHsKICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmNhdGVnb3J5LmlkCiAgICAgICAgICAgIGF4aW9zLmRlbGV0ZShgJHtiYXNlQXBpVXJsfS9jYXRlZ29yaWVzLyR7aWR9YCkKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmdsb2JhbC5kZWZhdWx0U3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKHNob3dFcnJvcikKICAgICAgICB9LAogICAgICAgIGxvYWRDYXRlZ29yeShjYXRlZ29yeSwgbW9kZSA9ICdzYXZlJykgewogICAgICAgICAgICB0aGlzLm1vZGUgPSBtb2RlCiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkgPSB7IC4uLmNhdGVnb3J5IH0KICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmxvYWRDYXRlZ29yaWVzKCkKICAgIH0KfQo="},{"version":3,"sources":["CategoryAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CategoryAdmin.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n    <div class=\"category-admin\">\n        <b-form>\n            <input id=\"category-id\" type=\"hidden\" v-model=\"category.id\" />\n            <b-form-group label=\"Nome:\" label-for=\"category-name\">\n                <b-form-input id=\"category-name\" type=\"text\"\n                    v-model=\"category.name\" required\n                    :readonly=\"mode === 'remove'\"\n                    placeholder=\"Informe o Nome da Categoria...\" />\n            </b-form-group>\n            <b-form-group label=\"Categoria Pai:\" label-for=\"category-parentId\">\n                <b-form-select v-if=\"mode === 'save'\"\n                    id=\"category-parentId\"\n                    :options=\"categories\" v-model=\"category.parentId\" />\n                <b-form-input v-else\n                    id=\"category-parentId\" type=\"text\"\n                    v-model=\"category.path\"\n                    readonly />\n            </b-form-group>\n            <b-button variant=\"primary\" v-if=\"mode === 'save'\"\n                @click=\"save\">Salvar</b-button>\n            <b-button variant=\"danger\" v-if=\"mode === 'remove'\"\n                @click=\"remove\">Excluir</b-button>\n            <b-button class=\"ml-2\" @click=\"reset\">Cancelar</b-button>\n        </b-form>\n        <hr>\n        <b-table hover striped :items=\"categories\" :fields=\"fields\">\n            <template slot=\"actions\" slot-scope=\"data\">\n                <b-button variant=\"warning\" @click=\"loadCategory(data.item)\" class=\"mr-2\">\n                    <i class=\"fa fa-pencil\"></i>\n                </b-button>\n                <b-button variant=\"danger\" @click=\"loadCategory(data.item, 'remove')\">\n                    <i class=\"fa fa-trash\"></i>\n                </b-button>\n            </template>\n        </b-table>\n    </div>\n</template>\n\n<script>\nimport { baseApiUrl, showError } from '@/global'\nimport axios from 'axios'\n\nexport default {\n    name: 'CategoryAdmin',\n    data: function() {\n        return {\n            mode: 'save',\n            category: {},\n            categories: [],\n            fields: [\n                { key: 'id', label: 'Código', sortable: true },\n                { key: 'name', label: 'Nome', sortable: true },\n                { key: 'path', label: 'Caminho', sortable: true },\n                { key: 'actions', label: 'Ações' }\n            ]\n        }\n    },\n    methods: {\n        loadCategories() {\n            const url = `${baseApiUrl}/categories`\n            axios.get(url).then(res => {\n                // this.categories = res.data\n                this.categories = res.data.map(category => {\n                    return { ...category, value: category.id, text: category.path }\n                })\n            })\n        },\n        reset() {\n            this.mode = 'save'\n            this.category = {}\n            this.loadCategories()\n        },\n        save() {\n            const method = this.category.id ? 'put' : 'post'\n            const id = this.category.id ? `/${this.category.id}` : ''\n            axios[method](`${baseApiUrl}/categories${id}`, this.category)\n                .then(() => {\n                    this.$toasted.global.defaultSuccess()\n                    this.reset()\n                })\n                .catch(showError)\n        },\n        remove() {\n            const id = this.category.id\n            axios.delete(`${baseApiUrl}/categories/${id}`)\n                .then(() => {\n                    this.$toasted.global.defaultSuccess()\n                    this.reset()\n                })\n                .catch(showError)\n        },\n        loadCategory(category, mode = 'save') {\n            this.mode = mode\n            this.category = { ...category }\n        }\n    },\n    mounted() {\n        this.loadCategories()\n    }\n}\n</script>\n\n<style>\n\n</style>"]}]}