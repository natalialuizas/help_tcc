{"remainingRequest":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/natalia/dev/tcc/projeto/frontend/src/components/cliente/CadCliente.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/natalia/dev/tcc/projeto/frontend/src/components/cliente/CadCliente.vue","mtime":1572444699821},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJhc2VBcGlVcmwsIHNob3dFcnJvciB9IGZyb20gJ0AvZ2xvYmFsJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDYWRDbGllbnQiLAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kZTogInNhdmUiLAogICAgICBjbnBqOiAnJwogICAgICBjbGllbnQ6IHt9LAogICAgICBjbGllbnRzOiBbXSwKICAgICAgcGFnZTogMSwKICAgICAgbGltaXQ6IDAsCiAgICAgIGNvdW50OiAwLAogICAgICBmaWVsZHM6IFsKICAgICAgICAvLyBhbHRlcmFuZG8gb3Mgbm9tZXMgZGEgdGFiZWxhcyBxdWUgdmVtIGRvIGJhbmNvLAogICAgICAgIC8vIHNvcnRhYmxlIMOpIHV0aWxpemFkbyBwYXJhIG9yZGVuYcOnw6NvIGRhcyBjb2x1bmFzCiAgICAgICAgeyBrZXk6ICJpZCIsIGxhYmVsOiAiQ8OzZGlnbyIsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJub21lRmFudGFzaWEiLCBsYWJlbDogIk5vbWUiLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAidGVsZWZvbmUiLCBsYWJlbDogIlRlbGVmb25lIiwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogImFjdGlvbnMiLCBsYWJlbDogIkHDp8O1ZXMiIH0KICAgICAgXSwKICAgICAgcGhvbmU6ICIoIyMpICMjIyMtIyMjIyIsCiAgICAgIGNlbDogIigjIykgIyMjIyMtIyMjIyIsCiAgICAgIGllOiAiIyMjLiMjIy4jIyMuIyMjIiwKICAgICAgY25wajogIiMjLiMjIy4jIyMvIyMjIy0jIyIsCiAgICAgIGNlcDogIiMjIyMjLSMjIyMiCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgICAgY25walZhbGlkYXRpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY25wai5sZW5ndGggPiAxMSA/IHRydWUgOiBmYWxzZSAKICAgICAgfQogICAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBjYXJyZWdhciBvcyB1c3XDoXJpb3MgZG8gYmFja2VuZAogICAgbG9hZENsaWVudHMoKSB7CiAgICAgIGNvbnN0IHVybCA9IGAke2Jhc2VBcGlVcmx9L2NsaWVudHM/cGFnZT0ke3RoaXMucGFnZX1gOwogICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5jbGllbnRzID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICB0aGlzLmxpbWl0ID0gcmVzLmRhdGEubGltaXQ7CiAgICAgICAgdGhpcy5jb3VudCA9IHJlcy5kYXRhLmNvdXQ7CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0KCkgewogICAgICAvLyB2b2x0YW5kbyBwcm8gbW9kbyBzYWx2YXIKICAgICAgdGhpcy5tb2RlID0gInNhdmUiOwogICAgICAvLyB6ZXJhbmRvIG8gZm9ybQogICAgICB0aGlzLmNsaWVudCA9IHt9OwogICAgICAvLyBjYXJyZWdhbmRvIGEgdGFiZWxhCiAgICAgIHRoaXMubG9hZENsaWVudHMoKTsKICAgIH0sCiAgICBzYXZlKCkgewogICAgICAvLyB2ZXJpZmljYW5kbyBvIGlkIGRvIHVzdcOhcmlvLCBjYXNvIHRpdmVyIHNldGFkbyBpcsOhIHNlciBwdXQKICAgICAgY29uc3QgbWV0aG9kID0gdGhpcy5jbGllbnQuaWQgPyAicHV0IiA6ICJwb3N0IjsKICAgICAgY29uc3QgaWQgPSB0aGlzLmNsaWVudC5pZCA/IGAvJHt0aGlzLmNsaWVudC5pZH1gIDogIiI7CiAgICAgIGF4aW9zW21ldGhvZF0oYCR7YmFzZUFwaVVybH0vY2xpZW50cyR7aWR9YCwgdGhpcy5jbGllbnQpCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgLy8gbW9zdHJhbmRvIGEgbWVuc2FnZW0gZGUgc3VjZXNzbwogICAgICAgICAgdGhpcy4kdG9hc3RlZC5nbG9iYWwuZGVmYXVsdFN1Y2Nlc3MoKTsKICAgICAgICAgIC8vIHJlc2V0YW5kbyBvIGZvcm11bGFyaW8gZSB0cmF6ZW5kbyBub3ZhIGxpc3RhIGRlIHVzdcOhcmlvCiAgICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goc2hvd0Vycm9yKTsKICAgIH0sCiAgICByZW1vdmUoKSB7CiAgICAgIGNvbnN0IGlkID0gdGhpcy5jbGllbnQuaWQ7CiAgICAgIGF4aW9zCiAgICAgICAgLmRlbGV0ZShgJHtiYXNlQXBpVXJsfS9jbGllbnRzLyR7aWR9YCkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiR0b2FzdGVkLmdsb2JhbC5kZWZhdWx0U3VjY2VzcygpOwogICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKHNob3dFcnJvcik7CiAgICB9LAogICAgbG9hZENsaWVudChjbGllbnQsIG1vZGUgPSAic2F2ZSIpIHsKICAgICAgdGhpcy5tb2RlID0gbW9kZTsKICAgICAgdGhpcy5jbGllbnQgPSB7IC4uLmNsaWVudCB9OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHBhZ2UoKSB7CiAgICAgIHRoaXMubG9hZENsaWVudHMoKTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRDbGllbnRzKCk7CiAgfQp9Owo="},{"version":3,"sources":["CadCliente.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4KA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CadCliente.vue","sourceRoot":"src/components/cliente","sourcesContent":["<template>\n  <div class=\"cad-client\">\n    <b-form>\n      <input id=\"client-id\" type=\"hidden\" v-model=\"client.id\" />\n      <b-row>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Razão Social:\" label-for=\"client-razao\">\n            <b-form-input\n              id=\"client-razao\"\n              type=\"text\"\n              v-model=\"client.razaoSocial\"\n              required\n              :readonly=\"mode === 'remove'\"\n              placeholder=\"Informe a Razão Social...\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Nome Fantasia:\" label-for=\"client-fantasia\">\n            <b-form-input\n              id=\"client-fantasia\"\n              type=\"text\"\n              v-model=\"client.nomeFantasia\"\n              required\n              placeholder=\"Informe o Nome Fantasia...\"\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <b-row v-show=\"mode === 'save'\">\n        <b-col md=\"3\" sm=\"12\">\n          <b-form-group label=\"CNPJ:\" label-for=\"client-cnpj\">\n            <b-form-input\n              id=\"client-cnpj\"\n              type=\"text\"\n              v-model=\"client.cnpj\"\n              :state=\"cnpjValidation\"\n              required\n              v-mask=\"cnpj\"\n              placeholder=\"Informe o CNPJ...\"\n            />\n          </b-form-group>\n        </b-col>\n         <b-form-invalid-feedback id=\"input-cnpj-feedback\">\n         Digite os 11 numeros\n        </b-form-invalid-feedback>\n        <b-col md=\"3\" sm=\"12\">\n          <b-form-group label=\"IE:\" label-for=\"client-ie\">\n            <b-form-input\n              id=\"client-ie\"\n              type=\"text\"\n              v-model=\"client.ie\"\n              required\n              v-mask=\"ie\"\n              placeholder=\"Informe a Esc. Estadual...\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"3\" sm=\"12\">\n          <b-form-group label=\"Telefone:\" label-for=\"client-telefone\">\n            <b-form-input\n              id=\"client-telefone\"\n              type=\"text\"\n              v-model=\"client.telefone\"\n              required\n              :readonly=\"mode === 'remove'\"\n              v-mask=\"phone\"\n              placeholder= \"(99) 9999-9999\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"3\" sm=\"12\">\n          <b-form-group label=\"Celular:\" label-for=\"client-celular\">\n            <b-form-input\n              id=\"client-celular\"\n              type=\"text\"\n              v-model=\"client.celular\"\n              required\n              v-mask=\"cel\"\n              placeholder= \"(99) 99999-9999\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Endereço:\" label-for=\"client-endereco\">\n            <b-form-input\n              id=\"client-endereco\"\n              type=\"text\"\n              v-model=\"client.endereco\"\n              required\n              placeholder=\"Informe o Endereço...\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Email:\" label-for=\"client-email\">\n            <b-form-input\n              id=\"client-email\"\n              type=\"text\"\n              v-model=\"client.email\"\n              required\n              placeholder=\"Informe o email...\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"3\" sm=\"12\">\n          <b-form-group label=\"Bairro:\" label-for=\"client-bairro\">\n            <b-form-input\n              id=\"client-bairro\"\n              type=\"text\"\n              v-model=\"client.bairro\"\n              required\n              placeholder=\"Informe o Bairro...\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"3\" sm=\"12\">\n          <b-form-group label=\"CEP:\" label-for=\"client-cep\">\n            <b-form-input id=\"client-cep\" type=\"text\" v-model=\"client.cep\" v-mask=\"cep\" required placeholder= \"99999-9999\" />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"3\" sm=\"12\">\n          <b-form-group label=\"Cidade:\" label-for=\"client-cidade\">\n            <b-form-input\n              id=\"client-cidade\"\n              type=\"text\"\n              v-model=\"client.cidade\"\n              required\n              placeholder=\"Informe a Cidade\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"3\" sm=\"12\">\n          <b-form-group label=\"Estado:\" label-for=\"client-estado\">\n            <b-form-input\n              id=\"client-estado\"\n              type=\"text\"\n              v-model=\"client.estado\"\n              required\n              placeholder\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col xs=\"12\">\n          <b-button variant=\"primary\" v-if=\"mode === 'save'\" @click=\"save\">Salvar</b-button>\n\n          <b-button variant=\"danger\" v-if=\"mode === 'remove'\" @click=\"remove\">Excluir</b-button>\n\n          <b-button class=\"ml-2\" @click=\"reset\">Cancelar</b-button>\n        </b-col>\n      </b-row>\n    </b-form>\n    <hr />\n\n    <b-table hover striped :items=\"clients\" :fields=\"fields\">\n      <template slot=\"actions\" slot-scope=\"data\">\n        <b-button variant=\"warning\" @click=\"loadClient(data.item)\" class=\"mr-2\">\n           <i class=\"fa fa-edit\"></i>\n        </b-button>\n        <b-button variant=\"danger\" @click=\"loadClient(data.item, 'remove')\">\n           <i class=\"fa fa-trash\"></i>\n        </b-button>\n      </template>\n    </b-table>\n   <!-- paginação -->\n      <b-pagination size=\"md\" v-model=\"page\" :total-rows=\"count\" :per-page=\"limit\" />\n  </div>\n</template>\n\n<script>\nimport { baseApiUrl, showError } from '@/global'\nimport axios from 'axios'\n\n\nexport default {\n  name: \"CadClient\",\n  data: function() {\n    return {\n      mode: \"save\",\n      cnpj: ''\n      client: {},\n      clients: [],\n      page: 1,\n      limit: 0,\n      count: 0,\n      fields: [\n        // alterando os nomes da tabelas que vem do banco,\n        // sortable é utilizado para ordenação das colunas\n        { key: \"id\", label: \"Código\", sortable: true },\n        { key: \"nomeFantasia\", label: \"Nome\", sortable: true },\n        { key: \"telefone\", label: \"Telefone\", sortable: true },\n        { key: \"actions\", label: \"Ações\" }\n      ],\n      phone: \"(##) ####-####\",\n      cel: \"(##) #####-####\",\n      ie: \"###.###.###.###\",\n      cnpj: \"##.###.###/####-##\",\n      cep: \"#####-####\"\n    };\n  },\n  computed: {\n      cnpjValidation() {\n        return this.cnpj.length > 11 ? true : false \n      }\n    },\n  methods: {\n    // carregar os usuários do backend\n    loadClients() {\n      const url = `${baseApiUrl}/clients?page=${this.page}`;\n      axios.get(url).then(res => {\n        this.clients = res.data.data;\n        this.limit = res.data.limit;\n        this.count = res.data.cout;\n      });\n    },\n    reset() {\n      // voltando pro modo salvar\n      this.mode = \"save\";\n      // zerando o form\n      this.client = {};\n      // carregando a tabela\n      this.loadClients();\n    },\n    save() {\n      // verificando o id do usuário, caso tiver setado irá ser put\n      const method = this.client.id ? \"put\" : \"post\";\n      const id = this.client.id ? `/${this.client.id}` : \"\";\n      axios[method](`${baseApiUrl}/clients${id}`, this.client)\n        .then(() => {\n          // mostrando a mensagem de sucesso\n          this.$toasted.global.defaultSuccess();\n          // resetando o formulario e trazendo nova lista de usuário\n          this.reset();\n        })\n        .catch(showError);\n    },\n    remove() {\n      const id = this.client.id;\n      axios\n        .delete(`${baseApiUrl}/clients/${id}`)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    loadClient(client, mode = \"save\") {\n      this.mode = mode;\n      this.client = { ...client };\n    }\n  },\n  watch: {\n    page() {\n      this.loadClients();\n    }\n  },\n  mounted() {\n    this.loadClients();\n  }\n};\n</script>\n\n<style>\n</style>\n"]}]}