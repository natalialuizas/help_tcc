{"remainingRequest":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/natalia/dev/tcc/projeto/frontend/src/components/admin/Software.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/natalia/dev/tcc/projeto/frontend/src/components/admin/Software.vue","mtime":1572279992121},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJhc2VBcGlVcmwsIHNob3dFcnJvciB9IGZyb20gIkAvZ2xvYmFsIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU29mdHdhcmUiLAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kZTogInNhdmUiLAogICAgICBzb2Z0d2FyZToge30sCiAgICAgIHNvZnR3YXJlczogW10sCiAgICAgIHBhZ2U6IDEsCiAgICAgIHBlclBhZ2U6IDAsCiAgICAgIHRvdGFsOiAwLAogICAgICBmaWVsZHM6IFsKICAgICAgICAvLyBhbHRlcmFuZG8gb3Mgbm9tZXMgZGEgdGFiZWxhcyBxdWUgdmVtIGRvIGJhbmNvLAogICAgICAgIC8vIHNvcnRhYmxlIMOpIHV0aWxpemFkbyBwYXJhIG9yZGVuYcOnw6NvIGRhcyBjb2x1bmFzCiAgICAgICAgeyBrZXk6ICJpZCIsIGxhYmVsOiAiQ8OzZGlnbyIsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJuYW1lIiwgbGFiZWw6ICJOb21lIiwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogImFjdGlvbnMiLCBsYWJlbDogIkHDp8O1ZXMiIH0KICAgICAgXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIGNhcnJlZ2FyIG9zIHVzdcOhcmlvcyBkbyBiYWNrZW5kCiAgICBsb2FkU29mdHdhcmVzKCkgewogICAgICBjb25zdCB1cmwgPSBgJHtiYXNlQXBpVXJsfS9zb2Z0d2FyZXM/cGFnZT0ke3RoaXMucGFnZX1gOwogICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zb2Z0d2FyZXMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICB0aGlzLnBlclBhZ2UgPSByZXMuZGF0YS5wZXJQYWdlOwogICAgICB9KTsKICAgIH0sCiAgICByZXNldCgpIHsKICAgICAgLy8gdm9sdGFuZG8gcHJvIG1vZG8gc2FsdmFyCiAgICAgIHRoaXMubW9kZSA9ICJzYXZlIjsKICAgICAgLy8gemVyYW5kbyBvIGZvcm0KICAgICAgdGhpcy5zb2Z0d2FyZSA9IHt9OwogICAgICAvLyBjYXJyZWdhbmRvIGEgdGFiZWxhCiAgICAgIHRoaXMubG9hZFNvZnR3YXJlcygpOwogICAgfSwKICAgIHNhdmUoKSB7CiAgICAgIC8vIHZlcmlmaWNhbmRvIG8gaWQgZG8gdXN1w6FyaW8sIGNhc28gdGl2ZXIgc2V0YWRvIGlyw6Egc2VyIHB1dAogICAgICBjb25zdCBtZXRob2QgPSB0aGlzLnNvZnR3YXJlLmlkID8gInB1dCIgOiAicG9zdCI7CiAgICAgIGNvbnN0IGlkID0gdGhpcy5zb2Z0d2FyZS5pZCA/IGAvJHt0aGlzLnNvZnR3YXJlLmlkfWAgOiAiIjsKICAgICAgYXhpb3NbbWV0aG9kXShgJHtiYXNlQXBpVXJsfS9zb2Z0d2FyZXMke2lkfWAsIHRoaXMuc29mdHdhcmUpCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgLy8gbW9zdHJhbmRvIGEgbWVuc2FnZW0gZGUgc3VjZXNzbwogICAgICAgICAgdGhpcy4kdG9hc3RlZC5nbG9iYWwuZGVmYXVsdFN1Y2Nlc3MoKTsKICAgICAgICAgIC8vIHJlc2V0YW5kbyBvIGZvcm11bGFyaW8gZSB0cmF6ZW5kbyBub3ZhIGxpc3RhIGRlIHVzdcOhcmlvCiAgICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goc2hvd0Vycm9yKTsKICAgIH0sCiAgICByZW1vdmUoKSB7CiAgICAgIGNvbnN0IGlkID0gdGhpcy5zb2Z0d2FyZS5pZDsKICAgICAgYXhpb3MKICAgICAgICAuZGVsZXRlKGAke2Jhc2VBcGlVcmx9L3NvZnR3YXJlcy8ke2lkfWApCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kdG9hc3RlZC5nbG9iYWwuZGVmYXVsdFN1Y2Nlc3MoKTsKICAgICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChzaG93RXJyb3IpOwogICAgfSwKICAgIGxvYWRTb2Z0d2FyZShzb2Z0d2FyZSwgbW9kZSA9ICJzYXZlIikgewogICAgICB0aGlzLm1vZGUgPSBtb2RlOwogICAgICB0aGlzLnNvZnR3YXJlID0geyAuLi5zb2Z0d2FyZSB9OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHBhZ2UoKSB7CiAgICAgIHRoaXMubG9hZFNvZnR3YXJlcygpOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubG9hZFNvZnR3YXJlcygpOwogIH0KfTsK"},{"version":3,"sources":["Software.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Software.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n  <div class=\"software-admin\">\n    <b-form>\n      <input id=\"software-id\" type=\"hidden\" v-model=\"software.id\" />\n      <b-row>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Nome:\" label-for=\"software-name\">\n            <b-form-input\n              id=\"software-name\"\n              type=\"text\"\n              v-model=\"software.name\"\n              required\n              :readonly=\"mode === 'remove'\"\n              placeholder=\"Informe o Nome do Software...\"\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col xs=\"12\">\n          <b-button variant=\"primary\" v-if=\"mode === 'save'\" @click=\"save\">Salvar</b-button>\n\n          <b-button variant=\"danger\" v-if=\"mode === 'remove'\" @click=\"remove\">Excluir</b-button>\n\n          <b-button class=\"ml-2\" @click=\"reset\">Cancelar</b-button>\n        </b-col>\n      </b-row>\n        <hr />\n      <b-row>\n        <b-col md=\"4\" sm=\"12\">\n            <b-form-input \n              class=\"pesquisa\"\n              id=\"software-pesquisa\"\n              type=\"search\"\n              v-model=\"software.pesquisa\"\n              placeholder=\"Pesquisar...\"\n            />\n        </b-col>\n      </b-row>\n    </b-form>\n    <b-table hover striped :items=\"softwares\" :fields=\"fields\">\n      <template slot=\"actions\" slot-scope=\"data\">\n        <b-button variant=\"warning\" @click=\"loadSoftware(data.item)\" class=\"mr-2\">\n          <i class=\"fas fa-edit\"></i>\n        </b-button>\n        <b-button variant=\"danger\" @click=\"loadSoftware(data.item, 'remove')\">\n          <i class=\"fas fa-trash\"></i>\n        </b-button>\n      </template>\n    </b-table>\n    <b-pagination size=\"md\" v-model=\"page\" :total-rows=\"total\" :per-page=\"perPage\" />\n  </div>\n</template>\n\n<script>\nimport { baseApiUrl, showError } from \"@/global\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"Software\",\n  data: function() {\n    return {\n      mode: \"save\",\n      software: {},\n      softwares: [],\n      page: 1,\n      perPage: 0,\n      total: 0,\n      fields: [\n        // alterando os nomes da tabelas que vem do banco,\n        // sortable é utilizado para ordenação das colunas\n        { key: \"id\", label: \"Código\", sortable: true },\n        { key: \"name\", label: \"Nome\", sortable: true },\n        { key: \"actions\", label: \"Ações\" }\n      ]\n    };\n  },\n  methods: {\n    // carregar os usuários do backend\n    loadSoftwares() {\n      const url = `${baseApiUrl}/softwares?page=${this.page}`;\n      axios.get(url).then(res => {\n        this.softwares = res.data.data;\n        this.total = res.data.total;\n        this.perPage = res.data.perPage;\n      });\n    },\n    reset() {\n      // voltando pro modo salvar\n      this.mode = \"save\";\n      // zerando o form\n      this.software = {};\n      // carregando a tabela\n      this.loadSoftwares();\n    },\n    save() {\n      // verificando o id do usuário, caso tiver setado irá ser put\n      const method = this.software.id ? \"put\" : \"post\";\n      const id = this.software.id ? `/${this.software.id}` : \"\";\n      axios[method](`${baseApiUrl}/softwares${id}`, this.software)\n        .then(() => {\n          // mostrando a mensagem de sucesso\n          this.$toasted.global.defaultSuccess();\n          // resetando o formulario e trazendo nova lista de usuário\n          this.reset();\n        })\n        .catch(showError);\n    },\n    remove() {\n      const id = this.software.id;\n      axios\n        .delete(`${baseApiUrl}/softwares/${id}`)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    loadSoftware(software, mode = \"save\") {\n      this.mode = mode;\n      this.software = { ...software };\n    }\n  },\n  watch: {\n    page() {\n      this.loadSoftwares();\n    }\n  },\n  mounted() {\n    this.loadSoftwares();\n  }\n};\n</script>\n\n<style>\n\n</style>\n"]}]}