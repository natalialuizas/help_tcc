{"remainingRequest":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/natalia/dev/tcc/projeto/frontend/src/components/software/CadSoftware.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/natalia/dev/tcc/projeto/frontend/src/components/software/CadSoftware.vue","mtime":1572350238994},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJhc2VBcGlVcmwsIHNob3dFcnJvciB9IGZyb20gJ0AvZ2xvYmFsJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNvZnR3YXJlIiwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIG1vZGU6ICJzYXZlIiwKICAgICAgc29mdHdhcmU6IHt9LAogICAgICBzb2Z0d2FyZXM6IFtdLAogICAgICBwYWdlOiAxLAogICAgICBsaW1pdDogMCwKICAgICAgY291bnQ6IDAsCiAgICAgIGZpZWxkczogWwogICAgICAgIC8vIGFsdGVyYW5kbyBvcyBub21lcyBkYSB0YWJlbGFzIHF1ZSB2ZW0gZG8gYmFuY28sCiAgICAgICAgLy8gc29ydGFibGUgw6kgdXRpbGl6YWRvIHBhcmEgb3JkZW5hw6fDo28gZGFzIGNvbHVuYXMKICAgICAgICB7IGtleTogImlkIiwgbGFiZWw6ICJDw7NkaWdvIiwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogIm5hbWVTb2Z0d2FyZSIsIGxhYmVsOiAiTm9tZSIsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJhY3Rpb25zIiwgbGFiZWw6ICJBw6fDtWVzIiB9CiAgICAgIF0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAgLy8gY2FycmVnYXIgb3MgU29mdHdhcmVzIGRvIGJhY2tlbmQKICAgICBsb2FkU29mdHdhcmVzKCkgewogICAgICBjb25zdCB1cmwgPSBgJHtiYXNlQXBpVXJsfS9zb2Z0d2FyZXM/cGFnZT0ke3RoaXMucGFnZX1gOwogICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zb2Z0d2FyZXMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgIHRoaXMuY291bnQgPSByZXMuZGF0YS5jb3VudDsKICAgICAgICB0aGlzLmxpbWl0ID0gcmVzLmRhdGEubGltaXQ7CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0KCkgewogICAgICAvLyB2b2x0YW5kbyBwcm8gbW9kbyBzYWx2YXIKICAgICAgdGhpcy5tb2RlID0gInNhdmUiOwogICAgICAvLyB6ZXJhbmRvIG8gZm9ybQogICAgICB0aGlzLnNvZnR3YXJlID0ge307CiAgICAgIC8vIGNhcnJlZ2FuZG8gYSB0YWJlbGEKICAgICAgdGhpcy5sb2FkU29mdHdhcmVzKCk7CiAgICB9LAogICAgc2F2ZSgpIHsKICAgICAgLy8gdmVyaWZpY2FuZG8gbyBpZCBkbyBzb2Z0d2FyZXMsIGNhc28gdGl2ZXIgc2V0YWRvIGlyw6Egc2VyIHB1dAogICAgICBjb25zdCBtZXRob2QgPSB0aGlzLnNvZnR3YXJlLmlkID8gInB1dCIgOiAicG9zdCI7CiAgICAgIGNvbnN0IGlkID0gdGhpcy5zb2Z0d2FyZS5pZCA/IGAvJHt0aGlzLnNvZnR3YXJlLmlkfWAgOiAiIjsKICAgICAgYXhpb3NbbWV0aG9kXShgJHtiYXNlQXBpVXJsfS9zb2Z0d2FyZXMke2lkfWAsIHRoaXMuc29mdHdhcmUpCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgLy8gbW9zdHJhbmRvIGEgbWVuc2FnZW0gZGUgc3VjZXNzbwogICAgICAgICAgdGhpcy4kdG9hc3RlZC5nbG9iYWwuZGVmYXVsdFN1Y2Nlc3MoKTsKICAgICAgICAgIC8vIHJlc2V0YW5kbyBvIGZvcm11bGFyaW8gZSB0cmF6ZW5kbyBub3ZhIGxpc3RhIGRlIHNvZnR3YXJlcwogICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKHNob3dFcnJvcik7CiAgICB9LAogICAgcmVtb3ZlKCkgewogICAgICBjb25zdCBpZCA9IHRoaXMuc29mdHdhcmUuaWQ7CiAgICAgIGF4aW9zCiAgICAgICAgLmRlbGV0ZShgJHtiYXNlQXBpVXJsfS9zb2Z0d2FyZXMvJHtpZH1gKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZ2xvYmFsLmRlZmF1bHRTdWNjZXNzKCk7CiAgICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goc2hvd0Vycm9yKTsKICAgIH0sCiAgICBsb2FkU29mdHdhcmUoc29mdHdhcmUsIG1vZGUgPSAic2F2ZSIpIHsKICAgICAgdGhpcy5tb2RlID0gbW9kZTsKICAgICAgdGhpcy5zb2Z0d2FyZSA9IHsgLi4uc29mdHdhcmUgfTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRTb2Z0d2FyZXMoKQogIH0sCiAgIHdhdGNoOiB7CiAgICBwYWdlKCkgewogICAgICB0aGlzLmxvYWRTb2Z0d2FyZXMoKQogICAgfQogIH0KfTsK"},{"version":3,"sources":["CadSoftware.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CadSoftware.vue","sourceRoot":"src/components/software","sourcesContent":["<template>\n  <div class=\"software\">\n    <b-form>\n      <input id=\"software-id\" type=\"hidden\" v-model=\"software.id\" />\n      <b-row>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Nome:\" label-for=\"software-nameSoftware\">\n            <b-form-input\n              id=\"software-name\"\n              type=\"text\"\n              v-model=\"software.nameSoftware\"\n              required\n              :readonly=\"mode === 'remove'\"\n              placeholder=\"Informe o Nome do Software...\"\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col xs=\"12\">\n          <b-button variant=\"primary\" v-if=\"mode === 'save'\" @click=\"save\">Salvar</b-button>\n\n          <b-button variant=\"danger\" v-if=\"mode === 'remove'\" @click=\"remove\">Excluir</b-button>\n\n          <b-button class=\"ml-2\" @click=\"reset\">Cancelar</b-button>\n        </b-col>\n      </b-row>\n    </b-form>\n       <hr>\n      <b-table hover striped :items=\"softwares\" :fields=\"fields\">\n            <template slot=\"actions\" slot-scope=\"data\">\n                <b-button variant=\"warning\" @click=\"loadSoftware(data.item)\" class=\"mr-2\">\n                    <i class=\"fa fa-edit\"></i>\n                </b-button>\n                <b-button variant=\"danger\" @click=\"loadSoftware(data.item, 'remove')\">\n                    <i class=\"fa fa-trash\"></i>\n                </b-button>\n            </template>\n        </b-table>\n     <b-pagination size=\"md\" v-model=\"page\" :total-rows=\"count\" :per-page=\"limit\" />\n  </div>\n</template>\n\n<script>\nimport { baseApiUrl, showError } from '@/global'\nimport axios from 'axios'\n\nexport default {\n  name: \"Software\",\n  data: function() {\n    return {\n      mode: \"save\",\n      software: {},\n      softwares: [],\n      page: 1,\n      limit: 0,\n      count: 0,\n      fields: [\n        // alterando os nomes da tabelas que vem do banco,\n        // sortable é utilizado para ordenação das colunas\n        { key: \"id\", label: \"Código\", sortable: true },\n        { key: \"nameSoftware\", label: \"Nome\", sortable: true },\n        { key: \"actions\", label: \"Ações\" }\n      ]\n    };\n  },\n  methods: {\n     // carregar os Softwares do backend\n     loadSoftwares() {\n      const url = `${baseApiUrl}/softwares?page=${this.page}`;\n      axios.get(url).then(res => {\n        this.softwares = res.data.data;\n        this.count = res.data.count;\n        this.limit = res.data.limit;\n      });\n    },\n    reset() {\n      // voltando pro modo salvar\n      this.mode = \"save\";\n      // zerando o form\n      this.software = {};\n      // carregando a tabela\n      this.loadSoftwares();\n    },\n    save() {\n      // verificando o id do softwares, caso tiver setado irá ser put\n      const method = this.software.id ? \"put\" : \"post\";\n      const id = this.software.id ? `/${this.software.id}` : \"\";\n      axios[method](`${baseApiUrl}/softwares${id}`, this.software)\n        .then(() => {\n          // mostrando a mensagem de sucesso\n          this.$toasted.global.defaultSuccess();\n          // resetando o formulario e trazendo nova lista de softwares\n          this.reset();\n        })\n        .catch(showError);\n    },\n    remove() {\n      const id = this.software.id;\n      axios\n        .delete(`${baseApiUrl}/softwares/${id}`)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    loadSoftware(software, mode = \"save\") {\n      this.mode = mode;\n      this.software = { ...software };\n    }\n  },\n  mounted() {\n    this.loadSoftwares()\n  },\n   watch: {\n    page() {\n      this.loadSoftwares()\n    }\n  }\n};\n</script>\n\n<style>\n\n</style>\n"]}]}