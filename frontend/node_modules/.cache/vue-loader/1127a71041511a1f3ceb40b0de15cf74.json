{"remainingRequest":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/natalia/dev/tcc/projeto/frontend/src/components/admin/User.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/natalia/dev/tcc/projeto/frontend/src/components/admin/User.vue","mtime":1572440151216},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJhc2VBcGlVcmwsIHNob3dFcnJvciB9IGZyb20gJ0AvZ2xvYmFsJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnVXNlckFkbWluJywKICAgIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG1vZGU6ICdzYXZlJywKICAgICAgICAgICAgdXNlcjoge30sCiAgICAgICAgICAgIHVzZXJzOiBbXSwKICAgICAgICAgICAgcGFnZTogMSwKICAgICAgICAgICAgbGltaXQ6IDAsCiAgICAgICAgICAgIGNvdW50OiAwLAogICAgICAgICAgICBmaWVsZHM6IFsKICAgICAgICAgICAgICAgIHsga2V5OiAnaWQnLCBsYWJlbDogJ0PDs2RpZ28nLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgeyBrZXk6ICduYW1lJywgbGFiZWw6ICdOb21lJywgc29ydGFibGU6IHRydWUgfSwKICAgICAgICAgICAgICAgIHsga2V5OiAnZW1haWwnLCBsYWJlbDogJ0UtbWFpbCcsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgICAgICAgICB7IGtleTogJ2FkbWluJywgbGFiZWw6ICdBZG1pbmlzdHJhZG9yJywgc29ydGFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyOiB2YWx1ZSA9PiB2YWx1ZSA/ICdTaW0nIDogJ07Do28nIH0sCiAgICAgICAgICAgICAgICB7IGtleTogJ2FjdGlvbnMnLCBsYWJlbDogJ0HDp8O1ZXMnIH0KICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgLy8gY2FycmVnYXIgb3MgdXN1w6FyaW9zIGRvIGJhY2tlbmQKICAgIGxvYWRVc2VycygpIHsKICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUFwaVVybH0vdXNlcnM/cGFnZT0ke3RoaXMucGFnZX1gOwogICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy51c2VycyA9IHJlcy5kYXRhLmRhdGEKICAgICAgICB0aGlzLmNvdW50ID0gcmVzLmRhdGEuY291bnQKICAgICAgICB0aGlzLmxpbWl0ID0gcmVzLmRhdGEubGltaXQKICAgICAgfSk7CiAgICB9LAogICAgICAgIHJlc2V0KCkgewogICAgICAgICAgICB0aGlzLm1vZGUgPSAnc2F2ZScKICAgICAgICAgICAgdGhpcy51c2VyID0ge30KICAgICAgICAgICAgdGhpcy5sb2FkVXNlcnMoKQogICAgICAgIH0sCiAgICAgICAgc2F2ZSgpIHsKICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gdGhpcy51c2VyLmlkID8gJ3B1dCcgOiAncG9zdCcKICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLnVzZXIuaWQgPyBgLyR7dGhpcy51c2VyLmlkfWAgOiAnJwogICAgICAgICAgICBheGlvc1ttZXRob2RdKGAke2Jhc2VBcGlVcmx9L3VzZXJzJHtpZH1gLCB0aGlzLnVzZXIpCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5nbG9iYWwuZGVmYXVsdFN1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChzaG93RXJyb3IpCiAgICAgICAgfSwKICAgICAgICByZW1vdmUoKSB7CiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy51c2VyLmlkCiAgICAgICAgICAgIGF4aW9zLmRlbGV0ZShgJHtiYXNlQXBpVXJsfS91c2Vycy8ke2lkfWApCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5nbG9iYWwuZGVmYXVsdFN1Y2Nlc3MoKQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChzaG93RXJyb3IpCiAgICAgICAgfSwKICAgICAgICBsb2FkVXNlcih1c2VyLCBtb2RlID0gJ3NhdmUnKSB7CiAgICAgICAgICAgIHRoaXMubW9kZSA9IG1vZGUKICAgICAgICAgICAgdGhpcy51c2VyID0geyAuLi51c2VyIH0KICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmxvYWRVc2VycygpCiAgICB9LAogICAgd2F0Y2g6IHsKICAgIHBhZ2UoKSB7CiAgICAgIHRoaXMubG9hZFVzZXJzKCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"User.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n    <div class=\"user-admin\">\n        <!-- inicio do formulário -->\n        <b-form>\n            <input id=\"user-id\" type=\"hidden\" v-model=\"user.id\" />\n            <b-row>\n                <!-- input de nome -->\n                <b-col md=\"6\" sm=\"12\">\n                    <b-form-group label=\"Nome:\" label-for=\"user-name\">\n                        <b-form-input id=\"user-name\" type=\"text\"\n                            v-model=\"user.name\" required\n                            :readonly=\"mode === 'remove'\"\n                            placeholder=\"Informe o Nome do Usuário...\" />\n                    </b-form-group>\n                </b-col>\n                  <!-- input de email -->\n                <b-col md=\"6\" sm=\"12\">\n                    <b-form-group label=\"E-mail:\" label-for=\"user-email\">\n                        <b-form-input id=\"user-email\" type=\"text\"\n                            v-model=\"user.email\" required\n                            :readonly=\"mode === 'remove'\"\n                            placeholder=\"Informe o E-mail do Usuário...\" />\n                    </b-form-group>\n                </b-col>\n            </b-row>\n              <!-- checkbox do administrador -->\n            <b-form-checkbox id=\"user-admin\" v-show=\"mode === 'save'\"\n                v-model=\"user.admin\" class=\"mt-3 mb-3\">\n                Administrador?\n            </b-form-checkbox>\n              <!-- input de senha -->\n            <b-row v-show=\"mode === 'save'\">\n                <b-col md=\"6\" sm=\"12\">\n                    <b-form-group label=\"Senha:\" label-for=\"user-password\">\n                        <b-form-input id=\"user-password\" type=\"password\"\n                            v-model=\"user.password\" required\n                            placeholder=\"Informe a Senha do Usuário...\" />\n                    </b-form-group>\n                </b-col>\n             <!-- input de confirmação de senha -->\n                <b-col md=\"6\" sm=\"12\">\n                    <b-form-group label=\"Confirmação de Senha:\" \n                        label-for=\"user-confirm-password\">\n                        <b-form-input id=\"user-confirm-password\" type=\"password\"\n                            v-model=\"user.confirmPassword\" required\n                            placeholder=\"Confirme a Senha do Usuário...\" />\n                    </b-form-group>\n                </b-col>\n            </b-row>\n              <!-- botões -->\n            <b-row>\n                <b-col xs=\"12\">\n                    <!-- salvar -->\n                    <b-button variant=\"primary\" v-if=\"mode === 'save'\"\n                        @click=\"save\">Salvar</b-button>\n                    <!-- excluir -->\n                    <b-button variant=\"danger\" v-if=\"mode === 'remove'\"\n                        @click=\"remove\">Excluir</b-button>\n                    <b-button class=\"ml-2\" @click=\"reset\">Cancelar</b-button>\n                </b-col>\n            </b-row>\n        </b-form>\n        <!-- final do formulário -->\n\n        <!-- risca separando o formulario da table  -->\n        <hr>\n\n     <!-- filtro de pesquisa -->\n    <div class=\"justify-content-centermy-1 row filtro\">\n\n    <b-form-fieldset  class=\"col-6\" :label-size=\"6\">\n      <b-form-input v-model=\"Pesquisa\" placeholder=\"Digite sua pesquisa...\"></b-form-input>\n    </b-form-fieldset>\n\n    <b-form-fieldset horizontal label=\"Administrador\" class=\"col-6\" :label-size=\"6\">\n      <b-form-select :options=\"[{text:Sim,value:1},{text:Não,value:0}]\">\n      </b-form-select>\n    </b-form-fieldset>\n  </div>\n\n    <!-- tabela  -->\n      <b-table hover striped responsive :items=\"users\" :fields=\"fields\">\n          <!-- botões de alterar e excluir -->\n            <template slot=\"actions\" slot-scope=\"data\">\n                <!-- botão de alterar -->\n                <b-button variant=\"warning\" @click=\"loadUser(data.item)\" class=\"mr-1\">\n                    <i class=\"fa fa-edit\"></i>\n                </b-button>\n                <!-- botão de excluir -->\n                <b-button variant=\"danger\" @click=\"loadUser(data.item, 'remove')\">\n                    <i class=\"fa fa-trash\"></i>\n                </b-button>\n            </template>\n        </b-table>\n        <!-- paginação -->\n     <b-pagination size=\"md\" v-model=\"page\" :total-rows=\"count\" :per-page=\"limit\" />\n    </div>\n</template>\n\n<script>\nimport { baseApiUrl, showError } from '@/global'\nimport axios from 'axios'\n\nexport default {\n    name: 'UserAdmin',\n    data: function() {\n        return {\n            mode: 'save',\n            user: {},\n            users: [],\n            page: 1,\n            limit: 0,\n            count: 0,\n            fields: [\n                { key: 'id', label: 'Código', sortable: true },\n                { key: 'name', label: 'Nome', sortable: true },\n                { key: 'email', label: 'E-mail', sortable: true },\n                { key: 'admin', label: 'Administrador', sortable: true,\n                    formatter: value => value ? 'Sim' : 'Não' },\n                { key: 'actions', label: 'Ações' }\n            ]\n        }\n    },\n    methods: {\n     // carregar os usuários do backend\n    loadUsers() {\n      const url = `${baseApiUrl}/users?page=${this.page}`;\n      axios.get(url).then(res => {\n        this.users = res.data.data\n        this.count = res.data.count\n        this.limit = res.data.limit\n      });\n    },\n        reset() {\n            this.mode = 'save'\n            this.user = {}\n            this.loadUsers()\n        },\n        save() {\n            const method = this.user.id ? 'put' : 'post'\n            const id = this.user.id ? `/${this.user.id}` : ''\n            axios[method](`${baseApiUrl}/users${id}`, this.user)\n                .then(() => {\n                    this.$toasted.global.defaultSuccess()\n                    this.reset()\n                })\n                .catch(showError)\n        },\n        remove() {\n            const id = this.user.id\n            axios.delete(`${baseApiUrl}/users/${id}`)\n                .then(() => {\n                    this.$toasted.global.defaultSuccess()\n                    this.reset()\n                })\n                .catch(showError)\n        },\n        loadUser(user, mode = 'save') {\n            this.mode = mode\n            this.user = { ...user }\n        }\n    },\n    mounted() {\n        this.loadUsers()\n    },\n    watch: {\n    page() {\n      this.loadUsers()\n    }\n  }\n}\n</script>\n\n<style>\n    .filtro {\n        padding-top: 20px;\n    }\n\n</style>\n"]}]}