{"remainingRequest":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/natalia/dev/tcc/projeto/frontend/src/components/admin/User.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/natalia/dev/tcc/projeto/frontend/src/components/admin/User.vue","mtime":1572281518039},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlVzZXIiLAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kZTogInNhdmUiLAogICAgICB1c2VyOiB7fSwKICAgICAgdXNlcnM6IFtdLAogICAgICBwYWdlOiAxLAogICAgICBwZXJQYWdlOiAwLAogICAgICB0b3RhbDogMCwKICAgICAgZmllbGRzOiBbCiAgICAgICAgLy8gYWx0ZXJhbmRvIG9zIG5vbWVzIGRhIHRhYmVsYXMgcXVlIHZlbSBkbyBiYW5jbywKICAgICAgICAvLyBzb3J0YWJsZSDDqSB1dGlsaXphZG8gcGFyYSBvcmRlbmHDp8OjbyBkYXMgY29sdW5hcwogICAgICAgIHsga2V5OiAiaWQiLCBsYWJlbDogIkPDs2RpZ28iLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAibmFtZSIsIGxhYmVsOiAiTm9tZSIsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJlbWFpbCIsIGxhYmVsOiAiRS1tYWlsIiwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICAvLyBmb3JtYXRhbmRvCiAgICAgICAgewogICAgICAgICAga2V5OiAiYWRtaW4iLAogICAgICAgICAgbGFiZWw6ICJBZG1pbmlzdHJhZG9yIiwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgICAgZm9ybWF0dGVyOiB2YWx1ZSA9PiAodmFsdWUgPyAiU2ltIiA6ICJOw6NvIikKICAgICAgICB9LAogICAgICAgIHsga2V5OiAiYWN0aW9ucyIsIGxhYmVsOiAiQcOnw7VlcyIgfQogICAgICBdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8gY2FycmVnYXIgb3MgdXN1w6FyaW9zIGRvIGJhY2tlbmQKICAgIGxvYWRVc2VycygpIHsKICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUFwaVVybH0vdXNlcnM/cGFnZT0ke3RoaXMucGFnZX1gOwogICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy51c2VycyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOwogICAgICAgIHRoaXMucGVyUGFnZSA9IHJlcy5kYXRhLnBlclBhZ2U7CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0KCkgewogICAgICAvLyB2b2x0YW5kbyBwcm8gbW9kbyBzYWx2YXIKICAgICAgdGhpcy5tb2RlID0gInNhdmUiOwogICAgICAvLyB6ZXJhbmRvIG8gZm9ybQogICAgICB0aGlzLnVzZXIgPSB7fTsKICAgICAgLy8gY2FycmVnYW5kbyBhIHRhYmVsYQogICAgICB0aGlzLmxvYWRVc2VycygpOwogICAgfSwKICAgIHNhdmUoKSB7CiAgICAgIC8vIHZlcmlmaWNhbmRvIG8gaWQgZG8gdXN1w6FyaW8sIGNhc28gdGl2ZXIgc2V0YWRvIGlyw6Egc2VyIHB1dAogICAgICBjb25zdCBtZXRob2QgPSB0aGlzLnVzZXIuaWQgPyAicHV0IiA6ICJwb3N0IjsKICAgICAgY29uc3QgaWQgPSB0aGlzLnVzZXIuaWQgPyBgLyR7dGhpcy51c2VyLmlkfWAgOiAiIjsKICAgICAgYXhpb3NbbWV0aG9kXShgJHtiYXNlQXBpVXJsfS91c2VycyR7aWR9YCwgdGhpcy51c2VyKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIC8vIG1vc3RyYW5kbyBhIG1lbnNhZ2VtIGRlIHN1Y2Vzc28KICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZ2xvYmFsLmRlZmF1bHRTdWNjZXNzKCk7CiAgICAgICAgICAvLyByZXNldGFuZG8gbyBmb3JtdWxhcmlvIGUgdHJhemVuZG8gbm92YSBsaXN0YSBkZSB1c3XDoXJpbwogICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKHNob3dFcnJvcik7CiAgICB9LAogICAgcmVtb3ZlKCkgewogICAgICBjb25zdCBpZCA9IHRoaXMudXNlci5pZDsKICAgICAgYXhpb3MKICAgICAgICAuZGVsZXRlKGAke2Jhc2VBcGlVcmx9L3VzZXJzLyR7aWR9YCkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiR0b2FzdGVkLmdsb2JhbC5kZWZhdWx0U3VjY2VzcygpOwogICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKHNob3dFcnJvcik7CiAgICB9LAogICAgbG9hZFVzZXIodXNlciwgbW9kZSA9ICJzYXZlIikgewogICAgICB0aGlzLm1vZGUgPSBtb2RlOwogICAgICB0aGlzLnVzZXIgPSB7IC4uLnVzZXIgfTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBwYWdlKCkgewogICAgICB0aGlzLmxvYWRVc2VycygpOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubG9hZFVzZXJzKCk7CiAgfQp9Owo="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"User.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n  <div class=\"user-admin\">\n    <b-form>\n      <input id=\"user-id\" type=\"hidden\" v-model=\"user.id\" />\n\n      <!---- Input do Nome--->\n      <b-row>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Nome:\" label-for=\"user-name\">\n            <b-form-input\n              id=\"user-name\"\n              type=\"text\"\n              v-model=\"user.name\"\n              required\n              :readonly=\"mode === 'remove'\"\n              placeholder=\"Informe o Nome do Usuário...\"\n            />\n          </b-form-group>\n        </b-col>\n\n        <!---- Input do Email--->\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"E-mail:\" label-for=\"user-email\">\n            <b-form-input\n              id=\"user-email\"\n              type=\"text\"\n              v-model=\"user.email\"\n              required\n              :readonly=\"mode === 'remove'\"\n              placeholder=\"Informe o E-mail do Usuário...\"\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n\n      <!---- CheckBox se pessoa é administrador ou não --->\n      <b-form-checkbox\n        id=\"user-admin\"\n        v-show=\"mode === 'save'\"\n        v-model=\"user.admin\"\n        class=\"mt-3 mb-3\"\n      >Administrador?</b-form-checkbox>\n\n      <!---- Input da Senha--->\n      <b-row v-show=\"mode === 'save'\">\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Senha:\" label-for=\"user-password\">\n            <b-form-input\n              id=\"user-password\"\n              type=\"password\"\n              v-model=\"user.password\"\n              required\n              placeholder=\"Informe a Senha do Usuário...\"\n            />\n          </b-form-group>\n        </b-col>\n\n        <!---- Input da confirmação da senha --->\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group label=\"Confirmação de Senha:\" label-for=\"user-confirm-password\">\n            <b-form-input\n              id=\"user-confirm-password\"\n              type=\"password\"\n              v-model=\"user.password_confirmation\"\n              required\n              placeholder=\"Confirme a Senha do Usuário...\"\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n\n      <!---- botões de salvar, alterar e excluir --->\n      <b-row>\n        <b-col xs=\"12\">\n          <b-button variant=\"primary\" v-if=\"mode === 'save'\" @click=\"save\">Salvar</b-button>\n          <b-button variant=\"danger\" v-if=\"mode === 'remove'\" @click=\"remove\">Excluir</b-button>\n          <b-button class=\"ml-2\" @click=\"reset\">Cancelar</b-button>\n        </b-col>\n      </b-row>\n    </b-form>\n\n    <!----- linha separando formulario e as tabelas ---->\n    <hr />\n    <!----- tabelas ---->\n    <b-table hover striped :items=\"users\" :fields=\"fields\">\n      <template slot=\"actions\" slot-scope=\"data\">\n        <!-- botões de alterar da tabela -->\n        <b-button variant=\"warning\" @click=\"loadUser(data.item)\" class=\"mr-2\">\n        <i class=\"fas fa-edit\"></i>\n        </b-button>\n        <b-button variant=\"danger\" @click=\"loadUser(data.item, 'remove')\">\n         <i class=\"fas fa-trash\"></i> \n        </b-button>\n      </template>\n    </b-table>\n    <!-- paginação -->\n    <b-pagination size=\"md\" v-model=\"page\" :total-rows=\"total\" :per-page=\"perPage\" />\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: \"User\",\n  data: function() {\n    return {\n      mode: \"save\",\n      user: {},\n      users: [],\n      page: 1,\n      perPage: 0,\n      total: 0,\n      fields: [\n        // alterando os nomes da tabelas que vem do banco,\n        // sortable é utilizado para ordenação das colunas\n        { key: \"id\", label: \"Código\", sortable: true },\n        { key: \"name\", label: \"Nome\", sortable: true },\n        { key: \"email\", label: \"E-mail\", sortable: true },\n        // formatando\n        {\n          key: \"admin\",\n          label: \"Administrador\",\n          sortable: true,\n          formatter: value => (value ? \"Sim\" : \"Não\")\n        },\n        { key: \"actions\", label: \"Ações\" }\n      ]\n    };\n  },\n  methods: {\n    // carregar os usuários do backend\n    loadUsers() {\n      const url = `${baseApiUrl}/users?page=${this.page}`;\n      axios.get(url).then(res => {\n        this.users = res.data.data;\n        this.total = res.data.total;\n        this.perPage = res.data.perPage;\n      });\n    },\n    reset() {\n      // voltando pro modo salvar\n      this.mode = \"save\";\n      // zerando o form\n      this.user = {};\n      // carregando a tabela\n      this.loadUsers();\n    },\n    save() {\n      // verificando o id do usuário, caso tiver setado irá ser put\n      const method = this.user.id ? \"put\" : \"post\";\n      const id = this.user.id ? `/${this.user.id}` : \"\";\n      axios[method](`${baseApiUrl}/users${id}`, this.user)\n        .then(() => {\n          // mostrando a mensagem de sucesso\n          this.$toasted.global.defaultSuccess();\n          // resetando o formulario e trazendo nova lista de usuário\n          this.reset();\n        })\n        .catch(showError);\n    },\n    remove() {\n      const id = this.user.id;\n      axios\n        .delete(`${baseApiUrl}/users/${id}`)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    loadUser(user, mode = \"save\") {\n      this.mode = mode;\n      this.user = { ...user };\n    }\n  },\n  watch: {\n    page() {\n      this.loadUsers();\n    }\n  },\n  mounted() {\n    this.loadUsers();\n  }\n};\n</script>\n<style>\n</style>\n\n"]}]}