{"remainingRequest":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/natalia/dev/tcc/projeto/frontend/src/components/cliente/Pesquisa.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/natalia/dev/tcc/projeto/frontend/src/components/cliente/Pesquisa.vue","mtime":1570664130000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDYWRDTGllbnRlIGZyb20gJy4uL2NsaWVudGUvQ2FkQ2xpZW50ZScKaW1wb3J0IHsgYmFzZUFwaVVybCwgc2hvd0Vycm9yIH0gZnJvbSAiQC9nbG9iYWwiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDYWRDbGllbnRlIiwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIG1vZGU6ICJzYXZlIiwKICAgICAgY2xpZW50OiB7fSwKICAgICAgY2xpZW50czogW10sCiAgICAgIGZpZWxkczogWwogICAgICAgIC8vIGFsdGVyYW5kbyBvcyBub21lcyBkYSB0YWJlbGFzIHF1ZSB2ZW0gZG8gYmFuY28sCiAgICAgICAgLy8gc29ydGFibGUgw6kgdXRpbGl6YWRvIHBhcmEgb3JkZW5hw6fDo28gZGFzIGNvbHVuYXMKICAgICAgICB7IGtleTogImlkIiwgbGFiZWw6ICJDw7NkaWdvIiwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogIm5vbWVGYW50YXNpYSIsIGxhYmVsOiAiTm9tZSIsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJ0ZWxlZm9uZSIsIGxhYmVsOiAiVGVsZWZvbmUiLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAiYWN0aW9ucyIsIGxhYmVsOiAiQcOnw7VlcyIgfQogICAgICBdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8gY2FycmVnYXIgb3MgdXN1w6FyaW9zIGRvIGJhY2tlbmQKICAgIGxvYWRDbGllbnRzKCkgewogICAgICBjb25zdCB1cmwgPSBgJHtiYXNlQXBpVXJsfS9jbGllbnRzYDsKICAgICAgYXhpb3MuZ2V0KHVybCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuY2xpZW50cyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICByZXNldCgpIHsKICAgICAgLy8gdm9sdGFuZG8gcHJvIG1vZG8gc2FsdmFyCiAgICAgIHRoaXMubW9kZSA9ICJzYXZlIjsKICAgICAgLy8gemVyYW5kbyBvIGZvcm0KICAgICAgdGhpcy5jbGllbnQgPSB7fTsKICAgICAgLy8gY2FycmVnYW5kbyBhIHRhYmVsYQogICAgICB0aGlzLmxvYWRDbGllbnRzKCk7CiAgICB9LAogICAgc2F2ZSgpIHsKICAgICAgLy8gdmVyaWZpY2FuZG8gbyBpZCBkbyB1c3XDoXJpbywgY2FzbyB0aXZlciBzZXRhZG8gaXLDoSBzZXIgcHV0CiAgICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMuY2xpZW50LmlkID8gInB1dCIgOiAicG9zdCI7CiAgICAgIGNvbnN0IGlkID0gdGhpcy5jbGllbnQuaWQgPyBgLyR7dGhpcy5jbGllbnQuaWR9YCA6ICIiOwogICAgICBheGlvc1ttZXRob2RdKGAke2Jhc2VBcGlVcmx9L2NsaWVudHMke2lkfWAsIHRoaXMuY2xpZW50KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIC8vIG1vc3RyYW5kbyBhIG1lbnNhZ2VtIGRlIHN1Y2Vzc28KICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZ2xvYmFsLmRlZmF1bHRTdWNjZXNzKCk7CiAgICAgICAgICAvLyByZXNldGFuZG8gbyBmb3JtdWxhcmlvIGUgdHJhemVuZG8gbm92YSBsaXN0YSBkZSB1c3XDoXJpbwogICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKHNob3dFcnJvcik7CiAgICB9LAogICAgcmVtb3ZlKCkgewogICAgICBjb25zdCBpZCA9IHRoaXMuY2xpZW50LmlkOwogICAgICBheGlvcwogICAgICAgIC5kZWxldGUoYCR7YmFzZUFwaVVybH0vY2xpZW50cy8ke2lkfWApCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kdG9hc3RlZC5nbG9iYWwuZGVmYXVsdFN1Y2Nlc3MoKTsKICAgICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChzaG93RXJyb3IpOwogICAgfSwKICAgIGxvYWRDbGllbnQoY2xpZW50LCBtb2RlID0gInNhdmUiKSB7CiAgICAgIHRoaXMubW9kZSA9IG1vZGU7CiAgICAgIHRoaXMuY2xpZW50ID0geyAuLi5jbGllbnQgfTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRDbGllbnRzKCk7CiAgfQp9Owo="},{"version":3,"sources":["Pesquisa.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Pesquisa.vue","sourceRoot":"src/components/cliente","sourcesContent":["<template>\n  <div class=\"cad-client\">\n    <b-form>\n      <input id=\"client-id\" type=\"hidden\" v-model=\"client.id\" />\n\n    <b-table hover striped :items=\"clients\" :fields=\"fields\">\n      <template slot=\"actions\" slot-scope=\"data\">\n        <b-button variant=\"warning\" @click=\"loadClient(data.item)\" class=\"mr-2\">\n          <i class=\"fas fa-edit\"></i>\n        </b-button>\n        <b-button variant=\"danger\" @click=\"loadClient(data.item, 'remove')\">\n          <i class=\"fas fa-trash\"></i>\n        </b-button>\n      </template>\n    </b-table>\n    </b-form>\n  </div>\n</template>\n\n<script>\nimport CadCLiente from '../cliente/CadCliente'\nimport { baseApiUrl, showError } from \"@/global\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"CadCliente\",\n  data: function() {\n    return {\n      mode: \"save\",\n      client: {},\n      clients: [],\n      fields: [\n        // alterando os nomes da tabelas que vem do banco,\n        // sortable é utilizado para ordenação das colunas\n        { key: \"id\", label: \"Código\", sortable: true },\n        { key: \"nomeFantasia\", label: \"Nome\", sortable: true },\n        { key: \"telefone\", label: \"Telefone\", sortable: true },\n        { key: \"actions\", label: \"Ações\" }\n      ]\n    };\n  },\n  methods: {\n    // carregar os usuários do backend\n    loadClients() {\n      const url = `${baseApiUrl}/clients`;\n      axios.get(url).then(res => {\n        this.clients = res.data;\n      });\n    },\n    reset() {\n      // voltando pro modo salvar\n      this.mode = \"save\";\n      // zerando o form\n      this.client = {};\n      // carregando a tabela\n      this.loadClients();\n    },\n    save() {\n      // verificando o id do usuário, caso tiver setado irá ser put\n      const method = this.client.id ? \"put\" : \"post\";\n      const id = this.client.id ? `/${this.client.id}` : \"\";\n      axios[method](`${baseApiUrl}/clients${id}`, this.client)\n        .then(() => {\n          // mostrando a mensagem de sucesso\n          this.$toasted.global.defaultSuccess();\n          // resetando o formulario e trazendo nova lista de usuário\n          this.reset();\n        })\n        .catch(showError);\n    },\n    remove() {\n      const id = this.client.id;\n      axios\n        .delete(`${baseApiUrl}/clients/${id}`)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    loadClient(client, mode = \"save\") {\n      this.mode = mode;\n      this.client = { ...client };\n    }\n  },\n  mounted() {\n    this.loadClients();\n  }\n};\n</script>\n\n<style>\n</style>\n"]}]}