{"remainingRequest":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/natalia/dev/tcc/projeto/frontend/src/components/admin/User.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/natalia/dev/tcc/projeto/frontend/src/components/admin/User.vue","mtime":1572282348229},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJhc2VBcGlVcmwsIHNob3dFcnJvciB9IGZyb20gJ0AvZ2xvYmFsJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnVXNlckFkbWluJywKICAgIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG1vZGU6ICdzYXZlJywKICAgICAgICAgICAgdXNlcjoge30sCiAgICAgICAgICAgIHVzZXJzOiBbXSwKICAgICAgICAgICAgZmllbGRzOiBbCiAgICAgICAgICAgICAgICB7IGtleTogJ2lkJywgbGFiZWw6ICdDw7NkaWdvJywgc29ydGFibGU6IHRydWUgfSwKICAgICAgICAgICAgICAgIHsga2V5OiAnbmFtZScsIGxhYmVsOiAnTm9tZScsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgICAgICAgICB7IGtleTogJ2VtYWlsJywgbGFiZWw6ICdFLW1haWwnLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgeyBrZXk6ICdhZG1pbicsIGxhYmVsOiAnQWRtaW5pc3RyYWRvcicsIHNvcnRhYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogdmFsdWUgPT4gdmFsdWUgPyAnU2ltJyA6ICdOw6NvJyB9LAogICAgICAgICAgICAgICAgeyBrZXk6ICdhY3Rpb25zJywgbGFiZWw6ICdBw6fDtWVzJyB9CiAgICAgICAgICAgIF0KICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgIC8vIGNhcnJlZ2FyIG9zIHVzdcOhcmlvcyBkbyBiYWNrZW5kCiAgICBsb2FkVXNlcnMoKSB7CiAgICAgIGNvbnN0IHVybCA9IGAke2Jhc2VBcGlVcmx9L3VzZXJzP3BhZ2U9JHt0aGlzLnBhZ2V9YDsKICAgICAgYXhpb3MuZ2V0KHVybCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudXNlcnMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICB0aGlzLnBlclBhZ2UgPSByZXMuZGF0YS5wZXJQYWdlOwogICAgICB9KTsKICAgIH0sCiAgICAgICAgcmVzZXQoKSB7CiAgICAgICAgICAgIHRoaXMubW9kZSA9ICdzYXZlJwogICAgICAgICAgICB0aGlzLnVzZXIgPSB7fQogICAgICAgICAgICB0aGlzLmxvYWRVc2VycygpCiAgICAgICAgfSwKICAgICAgICBzYXZlKCkgewogICAgICAgICAgICBjb25zdCBtZXRob2QgPSB0aGlzLnVzZXIuaWQgPyAncHV0JyA6ICdwb3N0JwogICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMudXNlci5pZCA/IGAvJHt0aGlzLnVzZXIuaWR9YCA6ICcnCiAgICAgICAgICAgIGF4aW9zW21ldGhvZF0oYCR7YmFzZUFwaVVybH0vdXNlcnMke2lkfWAsIHRoaXMudXNlcikKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmdsb2JhbC5kZWZhdWx0U3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKHNob3dFcnJvcikKICAgICAgICB9LAogICAgICAgIHJlbW92ZSgpIHsKICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLnVzZXIuaWQKICAgICAgICAgICAgYXhpb3MuZGVsZXRlKGAke2Jhc2VBcGlVcmx9L3VzZXJzLyR7aWR9YCkKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmdsb2JhbC5kZWZhdWx0U3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKHNob3dFcnJvcikKICAgICAgICB9LAogICAgICAgIGxvYWRVc2VyKHVzZXIsIG1vZGUgPSAnc2F2ZScpIHsKICAgICAgICAgICAgdGhpcy5tb2RlID0gbW9kZQogICAgICAgICAgICB0aGlzLnVzZXIgPSB7IC4uLnVzZXIgfQogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMubG9hZFVzZXJzKCkKICAgIH0KfQo="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"User.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n    <div class=\"user-admin\">\n        <b-form>\n            <input id=\"user-id\" type=\"hidden\" v-model=\"user.id\" />\n            <b-row>\n                <b-col md=\"6\" sm=\"12\">\n                    <b-form-group label=\"Nome:\" label-for=\"user-name\">\n                        <b-form-input id=\"user-name\" type=\"text\"\n                            v-model=\"user.name\" required\n                            :readonly=\"mode === 'remove'\"\n                            placeholder=\"Informe o Nome do Usuário...\" />\n                    </b-form-group>\n                </b-col>\n                <b-col md=\"6\" sm=\"12\">\n                    <b-form-group label=\"E-mail:\" label-for=\"user-email\">\n                        <b-form-input id=\"user-email\" type=\"text\"\n                            v-model=\"user.email\" required\n                            :readonly=\"mode === 'remove'\"\n                            placeholder=\"Informe o E-mail do Usuário...\" />\n                    </b-form-group>\n                </b-col>\n            </b-row>\n            <b-form-checkbox id=\"user-admin\" v-show=\"mode === 'save'\"\n                v-model=\"user.admin\" class=\"mt-3 mb-3\">\n                Administrador?\n            </b-form-checkbox>\n            <b-row v-show=\"mode === 'save'\">\n                <b-col md=\"6\" sm=\"12\">\n                    <b-form-group label=\"Senha:\" label-for=\"user-password\">\n                        <b-form-input id=\"user-password\" type=\"password\"\n                            v-model=\"user.password\" required\n                            placeholder=\"Informe a Senha do Usuário...\" />\n                    </b-form-group>\n                </b-col>\n                <b-col md=\"6\" sm=\"12\">\n                    <b-form-group label=\"Confirmação de Senha:\" \n                        label-for=\"user-confirm-password\">\n                        <b-form-input id=\"user-confirm-password\" type=\"password\"\n                            v-model=\"user.confirmPassword\" required\n                            placeholder=\"Confirme a Senha do Usuário...\" />\n                    </b-form-group>\n                </b-col>\n            </b-row>\n            <b-row>\n                <b-col xs=\"12\">\n                    <b-button variant=\"primary\" v-if=\"mode === 'save'\"\n                        @click=\"save\">Salvar</b-button>\n                    <b-button variant=\"danger\" v-if=\"mode === 'remove'\"\n                        @click=\"remove\">Excluir</b-button>\n                    <b-button class=\"ml-2\" @click=\"reset\">Cancelar</b-button>\n                </b-col>\n            </b-row>\n        </b-form>\n        <hr>\n        <b-table hover striped :items=\"users\" :fields=\"fields\">\n            <template slot=\"actions\" slot-scope=\"data\">\n                <b-button variant=\"warning\" @click=\"loadUser(data.item)\" class=\"mr-2\">\n                    <i class=\"fa fa-pencil\"></i>\n                </b-button>\n                <b-button variant=\"danger\" @click=\"loadUser(data.item, 'remove')\">\n                    <i class=\"fa fa-trash\"></i>\n                </b-button>\n            </template>\n        </b-table>\n        <!-- paginação -->\n    <b-pagination size=\"md\" v-model=\"page\" :total-rows=\"total\" :per-page=\"perPage\" />\n    </div>\n</template>\n\n<script>\nimport { baseApiUrl, showError } from '@/global'\nimport axios from 'axios'\n\nexport default {\n    name: 'UserAdmin',\n    data: function() {\n        return {\n            mode: 'save',\n            user: {},\n            users: [],\n            fields: [\n                { key: 'id', label: 'Código', sortable: true },\n                { key: 'name', label: 'Nome', sortable: true },\n                { key: 'email', label: 'E-mail', sortable: true },\n                { key: 'admin', label: 'Administrador', sortable: true,\n                    formatter: value => value ? 'Sim' : 'Não' },\n                { key: 'actions', label: 'Ações' }\n            ]\n        }\n    },\n    methods: {\n     // carregar os usuários do backend\n    loadUsers() {\n      const url = `${baseApiUrl}/users?page=${this.page}`;\n      axios.get(url).then(res => {\n        this.users = res.data.data;\n        this.total = res.data.total;\n        this.perPage = res.data.perPage;\n      });\n    },\n        reset() {\n            this.mode = 'save'\n            this.user = {}\n            this.loadUsers()\n        },\n        save() {\n            const method = this.user.id ? 'put' : 'post'\n            const id = this.user.id ? `/${this.user.id}` : ''\n            axios[method](`${baseApiUrl}/users${id}`, this.user)\n                .then(() => {\n                    this.$toasted.global.defaultSuccess()\n                    this.reset()\n                })\n                .catch(showError)\n        },\n        remove() {\n            const id = this.user.id\n            axios.delete(`${baseApiUrl}/users/${id}`)\n                .then(() => {\n                    this.$toasted.global.defaultSuccess()\n                    this.reset()\n                })\n                .catch(showError)\n        },\n        loadUser(user, mode = 'save') {\n            this.mode = mode\n            this.user = { ...user }\n        }\n    },\n    mounted() {\n        this.loadUsers()\n    }\n}\n</script>\n\n<style>\n\n</style>\n"]}]}