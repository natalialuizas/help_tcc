{"remainingRequest":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/natalia/dev/tcc/projeto/frontend/src/components/software/CadProblem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/natalia/dev/tcc/projeto/frontend/src/components/software/CadProblem.vue","mtime":1572520299665},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydGFuZG8gdXJsIGRvIGJhY2tlbmQgZSBhcyBtZW5zYWdlbXMgcGFyYSBlcnJvcwppbXBvcnQgeyBiYXNlQXBpVXJsLCBzaG93RXJyb3IgfSBmcm9tICdAL2dsb2JhbCcKLy8gY2xpZW50ZSBIVFRQIChmYXogY29tdW5pY2HDp8OjbyBkbyBiYWNrZW5kIGUgZnJvbnRlbmQpCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKLy8gY2FpeGEgZGUgZWRpw6fDo28KaW1wb3J0IHsgVnVlRWRpdG9yIH0gZnJvbSAidnVlMi1lZGl0b3IiCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlByb2JsZW0iLAogIGNvbXBvbmVudHM6IHsgVnVlRWRpdG9yIH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBtb2RlOiAic2F2ZSIsCiAgICAgIHByb2JsZW06IHt9LAogICAgICBwcm9ibGVtczogW10sCiAgICAgIHNvZnR3YXJlczogW10sCiAgICAgIHR5cGVzOiBbJ05GRScsICdTQVQnLCAnU0lTVEVNQSddLAogICAgICBwYWdlOiAxLAogICAgICBsaW1pdDogMCwKICAgICAgY291bnQ6IDAsCiAgICAgIGZpZWxkczogWwogICAgICAgIHsga2V5OiAiaWQiLCBsYWJlbDogIkPDs2RpZ28iLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAiZGVzY3JpcHRpb24iLCBsYWJlbDogIk5vbWUiLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAic29mdHdhcmVJZCIsIGxhYmVsOiAiU29mdHdhcmUiLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAidHlwZSIsIGxhYmVsOiAiVGlwbyIsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJhY3Rpb25zIiwgbGFiZWw6ICJBw6fDtWVzIiB9CiAgICAgIF0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgICAvLyBjYXJyZWdhciBiYXNlIGRlIGNvbmhlY2ltZW50byBkbyBiYWNrZW5kCiAgICBsb2FkUHJvYmxlbXMoKSB7CiAgICAgIGNvbnN0IHVybCA9IGAke2Jhc2VBcGlVcmx9L3Byb2JsZW1zP3BhZ2U9JHt0aGlzLnBhZ2V9YAogICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5wcm9ibGVtcyA9IHJlcy5kYXRhLmRhdGEKICAgICAgICB0aGlzLmNvdW50ID0gcmVzLmRhdGEuY291bnQKICAgICAgICB0aGlzLmxpbWl0ID0gcmVzLmRhdGEubGltaXQKICAgICAgfSk7CiAgICB9LAogICAgcmVzZXQoKSB7CiAgICAgICAvLyB2b2x0YW5kbyBwcm8gbW9kbyBzYWx2YXIKICAgICAgdGhpcy5tb2RlID0gInNhdmUiCiAgICAgIC8vIHplcmFuZG8gbyBmb3JtCiAgICAgIHRoaXMucHJvYmxlbSA9IHt9CiAgICAgIC8vIGNhcnJlZ2FuZG8gYSB0YWJlbGEKICAgICAgdGhpcy5sb2FkUHJvYmxlbXMoKQogICAgfSwKICAgIHNhdmUoKSB7CiAgICAgIC8vIAogICAgICBjb25zdCBtZXRob2QgPSB0aGlzLnByb2JsZW0uaWQgPyAicHV0IiA6ICJwb3N0IgogICAgICAvLyBmYXogdmVyaWZpY2HDp8OjbyBzZSBvIGlkIGRvIHByb2JsZW1hIGVzdMOhIHNldGFkbwogICAgICBjb25zdCBpZCA9IHRoaXMucHJvYmxlbS5pZCA/IGAvJHt0aGlzLnByb2JsZW0uaWR9YCA6ICIiCiAgICAgIGF4aW9zW21ldGhvZF0oYCR7YmFzZUFwaVVybH0vcHJvYmxlbXMke2lkfWAsIHRoaXMucHJvYmxlbSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAvLyBtb3N0cmFuZG8gYSBtZW5zYWdlbSBkZSBzdWNlc3NvCiAgICAgICAgICB0aGlzLiR0b2FzdGVkLmdsb2JhbC5kZWZhdWx0U3VjY2VzcygpCiAgICAgICAgICAvLyByZXNldGFuZG8gbyBmb3JtdWxhcmlvIGUgdHJhemVuZG8gbm92YSBsaXN0YSBkZSBwcm9ibGVtYXMKICAgICAgICAgIHRoaXMucmVzZXQoKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKHNob3dFcnJvcikKICAgIH0sCiAgICByZW1vdmUoKSB7CiAgICAgIGNvbnN0IGlkID0gdGhpcy5wcm9ibGVtLmlkOwogICAgICBheGlvcwogICAgICAgIC5kZWxldGUoYCR7YmFzZUFwaVVybH0vcHJvYmxlbXMvJHtpZH1gKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZ2xvYmFsLmRlZmF1bHRTdWNjZXNzKCkKICAgICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChzaG93RXJyb3IpOwogICAgfSwKICAgIGxvYWRQcm9ibGVtKHByb2JsZW0sIG1vZGUgPSAic2F2ZSIpIHsKICAgICAgdGhpcy5tb2RlID0gbW9kZTsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KGAke2Jhc2VBcGlVcmx9L3Byb2JsZW1zLyR7cHJvYmxlbS5pZH1gKQogICAgICAgIC50aGVuKHJlcyA9PiAodGhpcy5wcm9ibGVtID0gcmVzLmRhdGEpKQogICAgfSwKICAgIGxvYWRTb2Z0d2FyZXMoKSB7CiAgICAgIGNvbnN0IHVybCA9IGAke2Jhc2VBcGlVcmx9L3NvZnR3YXJlc0xpc3RgCiAgICAgIGF4aW9zLmdldCh1cmwpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnNvZnR3YXJlcyA9IHJlcy5kYXRhLm1hcChzb2Z0d2FyZSA9PiB7CiAgICAgICAgICByZXR1cm4geyB2YWx1ZTogc29mdHdhcmUuaWQsIHRleHQ6IHNvZnR3YXJlLm5hbWVTb2Z0d2FyZSB9CiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBsb2FkVHlwZXMoKSB7CiAgICAgIGNvbnN0IHVybCA9IGAke2Jhc2VBcGlVcmx9L3R5cGVzYAogICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy50eXBlcyA9IHJlcy5kYXRhLm1hcCh0eXBlID0+IHsKICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB0eXBlLmlkLCB0ZXh0OiBgJHt0eXBlLm5hbWV9IGAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBwYWdlKCkgewogICAgICB0aGlzLmxvYWRQcm9ibGVtcygpCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkU29mdHdhcmVzKCkKICAgIHRoaXMubG9hZFByb2JsZW1zKCkKICAgIHRoaXMubG9hZFR5cGVzKCkKICB9Cn07Cg=="},{"version":3,"sources":["CadProblem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CadProblem.vue","sourceRoot":"src/components/software","sourcesContent":["<template>\n  <div class=\"problem\">\n    <b-form>\n      <input id=\"problem-id\" type=\"hidden\" v-model=\"problem.id\" />\n      <b-row>\n        <b-col md=\"8\" sm=\"12\">\n          <b-form-group label=\"Descrição:\" label-for=\"problem-description\">\n            <b-form-input\n              id=\"problem-description\"\n              type=\"text\"\n              v-model=\"problem.description\"\n              required\n              :readonly=\"mode === 'remove'\"\n              placeholder=\"Informe o Nome do Erro...\"\n            />\n          </b-form-group>\n        </b-col>\n        <b-col md=\"4\" sm=\"12\">\n          <b-form-group  label=\"Software:\" label-for=\"problem-softwareId\">\n            <b-form-select\n              id=\"problem-softwareId\"\n              :options=\"softwares\"\n              v-model=\"problem.softwareId\"\n              :readonly=\"mode === 'remove'\"\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col md=\"8\" sm=\"12\">\n          <b-form-group  v-if=\"mode === 'save' \"label=\"Arquivo:\" label-for=\"problem-file_id\">\n            <b-form-file id=\"problem-file_id\" accept=\".jpg, .png, .gif\"></b-form-file>\n          </b-form-group>\n        </b-col>\n        <b-col md=\"4\" sm=\"12\">\n          <b-form-group v-if=\"mode === 'save'\" label=\"Tipo:\" label-for=\"problem-type_id\">\n            <b-form-select id=\"problem-type_id\" :options=\"types\" v-model=\"problem.type_id\" />\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <b-form-group v-if=\"mode === 'save'\" label=\"Solução\" label-for=\"problem-content\">\n        <VueEditor v-model=\"problem.solution\" placeholder=\"Informe as possiveis soluções...\" />\n      </b-form-group>\n      <b-button variant=\"primary\" v-if=\"mode === 'save'\" @click=\"save\">Salvar</b-button>\n      <b-button variant=\"danger\" v-if=\"mode === 'remove'\" @click=\"remove\">Excluir</b-button>\n      <b-button class=\"ml-2\" @click=\"reset\">Cancelar</b-button>\n    </b-form>\n    <hr />\n    <b-table hover striped :items=\"problems\" :fields=\"fields\">\n      <template slot=\"actions\" slot-scope=\"data\">\n        <b-button variant=\"warning\" @click=\"loadProblem(data.item)\" class=\"mr-2\">\n        <i class=\"fa fa-edit\"></i>\n        </b-button>\n        <b-button variant=\"danger\" @click=\"loadProblem(data.item, 'remove')\">\n         <i class=\"fa fa-trash\"></i> \n        </b-button>\n      </template>\n    </b-table>\n      <!-- paginação -->\n      <b-pagination size=\"md\" v-model=\"page\" :total-rows=\"count\" :per-page=\"limit\" />\n  </div>\n</template>\n\n<script>\n// importando url do backend e as mensagems para erros\nimport { baseApiUrl, showError } from '@/global'\n// cliente HTTP (faz comunicação do backend e frontend)\nimport axios from 'axios'\n// caixa de edição\nimport { VueEditor } from \"vue2-editor\"\n\nexport default {\n  name: \"Problem\",\n  components: { VueEditor },\n  data: function() {\n    return {\n      mode: \"save\",\n      problem: {},\n      problems: [],\n      softwares: [],\n      types: ['NFE', 'SAT', 'SISTEMA'],\n      page: 1,\n      limit: 0,\n      count: 0,\n      fields: [\n        { key: \"id\", label: \"Código\", sortable: true },\n        { key: \"description\", label: \"Nome\", sortable: true },\n        { key: \"softwareId\", label: \"Software\", sortable: true },\n        { key: \"type\", label: \"Tipo\", sortable: true },\n        { key: \"actions\", label: \"Ações\" }\n      ]\n    }\n  },\n  methods: {\n     // carregar base de conhecimento do backend\n    loadProblems() {\n      const url = `${baseApiUrl}/problems?page=${this.page}`\n      axios.get(url).then(res => {\n        this.problems = res.data.data\n        this.count = res.data.count\n        this.limit = res.data.limit\n      });\n    },\n    reset() {\n       // voltando pro modo salvar\n      this.mode = \"save\"\n      // zerando o form\n      this.problem = {}\n      // carregando a tabela\n      this.loadProblems()\n    },\n    save() {\n      // \n      const method = this.problem.id ? \"put\" : \"post\"\n      // faz verificação se o id do problema está setado\n      const id = this.problem.id ? `/${this.problem.id}` : \"\"\n      axios[method](`${baseApiUrl}/problems${id}`, this.problem)\n        .then(() => {\n          // mostrando a mensagem de sucesso\n          this.$toasted.global.defaultSuccess()\n          // resetando o formulario e trazendo nova lista de problemas\n          this.reset()\n        })\n        .catch(showError)\n    },\n    remove() {\n      const id = this.problem.id;\n      axios\n        .delete(`${baseApiUrl}/problems/${id}`)\n        .then(() => {\n          this.$toasted.global.defaultSuccess()\n          this.reset();\n        })\n        .catch(showError);\n    },\n    loadProblem(problem, mode = \"save\") {\n      this.mode = mode;\n      axios\n        .get(`${baseApiUrl}/problems/${problem.id}`)\n        .then(res => (this.problem = res.data))\n    },\n    loadSoftwares() {\n      const url = `${baseApiUrl}/softwaresList`\n      axios.get(url).then(res => {\n        this.softwares = res.data.map(software => {\n          return { value: software.id, text: software.nameSoftware }\n        })\n      })\n    },\n    loadTypes() {\n      const url = `${baseApiUrl}/types`\n      axios.get(url).then(res => {\n        this.types = res.data.map(type => {\n          return { value: type.id, text: `${type.name} ` }\n        });\n      });\n    }\n  },\n  watch: {\n    page() {\n      this.loadProblems()\n    }\n  },\n  mounted() {\n    this.loadSoftwares()\n    this.loadProblems()\n    this.loadTypes()\n  }\n};\n</script>\n\n<style>\n</style>\n"]}]}