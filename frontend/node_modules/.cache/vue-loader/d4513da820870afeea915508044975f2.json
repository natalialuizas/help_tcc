{"remainingRequest":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/natalia/dev/tcc/projeto/frontend/src/components/admin/ArticleAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/natalia/dev/tcc/projeto/frontend/src/components/admin/ArticleAdmin.vue","mtime":1539007343000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFZ1ZUVkaXRvciB9IGZyb20gInZ1ZTItZWRpdG9yIgppbXBvcnQgeyBiYXNlQXBpVXJsLCBzaG93RXJyb3IgfSBmcm9tICdAL2dsb2JhbCcKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0FydGljbGVBZG1pbicsCiAgICBjb21wb25lbnRzOiB7IFZ1ZUVkaXRvciB9LAogICAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbW9kZTogJ3NhdmUnLAogICAgICAgICAgICBhcnRpY2xlOiB7fSwKICAgICAgICAgICAgYXJ0aWNsZXM6IFtdLAogICAgICAgICAgICBjYXRlZ29yaWVzOiBbXSwKICAgICAgICAgICAgdXNlcnM6IFtdLAogICAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgICBsaW1pdDogMCwKICAgICAgICAgICAgY291bnQ6IDAsCiAgICAgICAgICAgIGZpZWxkczogWwogICAgICAgICAgICAgICAgeyBrZXk6ICdpZCcsIGxhYmVsOiAnQ8OzZGlnbycsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgICAgICAgICB7IGtleTogJ25hbWUnLCBsYWJlbDogJ05vbWUnLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgeyBrZXk6ICdkZXNjcmlwdGlvbicsIGxhYmVsOiAnRGVzY3Jpw6fDo28nLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgeyBrZXk6ICdhY3Rpb25zJywgbGFiZWw6ICdBw6fDtWVzJyB9CiAgICAgICAgICAgIF0KICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGxvYWRBcnRpY2xlcygpIHsKICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUFwaVVybH0vYXJ0aWNsZXM/cGFnZT0ke3RoaXMucGFnZX1gCiAgICAgICAgICAgIGF4aW9zLmdldCh1cmwpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuYXJ0aWNsZXMgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gcmVzLmRhdGEuY291bnQKICAgICAgICAgICAgICAgIHRoaXMubGltaXQgPSByZXMuZGF0YS5saW1pdAogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgcmVzZXQoKSB7CiAgICAgICAgICAgIHRoaXMubW9kZSA9ICdzYXZlJwogICAgICAgICAgICB0aGlzLmFydGljbGUgPSB7fQogICAgICAgICAgICB0aGlzLmxvYWRBcnRpY2xlcygpCiAgICAgICAgfSwKICAgICAgICBzYXZlKCkgewogICAgICAgICAgICBjb25zdCBtZXRob2QgPSB0aGlzLmFydGljbGUuaWQgPyAncHV0JyA6ICdwb3N0JwogICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuYXJ0aWNsZS5pZCA/IGAvJHt0aGlzLmFydGljbGUuaWR9YCA6ICcnCiAgICAgICAgICAgIGF4aW9zW21ldGhvZF0oYCR7YmFzZUFwaVVybH0vYXJ0aWNsZXMke2lkfWAsIHRoaXMuYXJ0aWNsZSkKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmdsb2JhbC5kZWZhdWx0U3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKHNob3dFcnJvcikKICAgICAgICB9LAogICAgICAgIHJlbW92ZSgpIHsKICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmFydGljbGUuaWQKICAgICAgICAgICAgYXhpb3MuZGVsZXRlKGAke2Jhc2VBcGlVcmx9L2FydGljbGVzLyR7aWR9YCkKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmdsb2JhbC5kZWZhdWx0U3VjY2VzcygpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKHNob3dFcnJvcikKICAgICAgICB9LAogICAgICAgIGxvYWRBcnRpY2xlKGFydGljbGUsIG1vZGUgPSAnc2F2ZScpIHsKICAgICAgICAgICAgdGhpcy5tb2RlID0gbW9kZQogICAgICAgICAgICBheGlvcy5nZXQoYCR7YmFzZUFwaVVybH0vYXJ0aWNsZXMvJHthcnRpY2xlLmlkfWApCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5hcnRpY2xlID0gcmVzLmRhdGEpCiAgICAgICAgfSwKICAgICAgICBsb2FkQ2F0ZWdvcmllcygpIHsKICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUFwaVVybH0vY2F0ZWdvcmllc2AKICAgICAgICAgICAgYXhpb3MuZ2V0KHVybCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yaWVzID0gcmVzLmRhdGEubWFwKGNhdGVnb3J5ID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogY2F0ZWdvcnkuaWQsIHRleHQ6IGNhdGVnb3J5LnBhdGggfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGxvYWRVc2VycygpIHsKICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUFwaVVybH0vdXNlcnNgCiAgICAgICAgICAgIGF4aW9zLmdldCh1cmwpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudXNlcnMgPSByZXMuZGF0YS5tYXAodXNlciA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHVzZXIuaWQsIHRleHQ6IGAke3VzZXIubmFtZX0gLSAke3VzZXIuZW1haWx9YCB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0sCiAgICB3YXRjaDogewogICAgICAgIHBhZ2UoKSB7CiAgICAgICAgICAgIHRoaXMubG9hZEFydGljbGVzKCkKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmxvYWRVc2VycygpCiAgICAgICAgdGhpcy5sb2FkQ2F0ZWdvcmllcygpCiAgICAgICAgdGhpcy5sb2FkQXJ0aWNsZXMoKQogICAgfQp9Cg=="},{"version":3,"sources":["ArticleAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArticleAdmin.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n    <div class=\"article-admin\">\n        <b-form>\n            <input id=\"article-id\" type=\"hidden\" v-model=\"article.id\" />\n            <b-form-group label=\"Nome:\" label-for=\"article-name\">\n                <b-form-input id=\"article-name\" type=\"text\"\n                    v-model=\"article.name\" required\n                    :readonly=\"mode === 'remove'\"\n                    placeholder=\"Informe o Nome do Artigo...\" />\n            </b-form-group>\n            <b-form-group label=\"Descrição\" label-for=\"article-description\">\n                <b-form-input id=\"article-description\" type=\"text\"\n                    v-model=\"article.description\" required\n                    :readonly=\"mode === 'remove'\"\n                    placeholder=\"Informe o Nome do Artigo...\" />\n            </b-form-group>\n            <b-form-group v-if=\"mode === 'save'\"\n                label=\"Imagem (URL):\" label-for=\"article-imageUrl\">\n                <b-form-input id=\"article-imageUrl\" type=\"text\"\n                    v-model=\"article.imageUrl\" required\n                    :readonly=\"mode === 'remove'\"\n                    placeholder=\"Informe a URL da Imagem...\" />\n            </b-form-group>\n            <b-form-group v-if=\"mode === 'save'\" \n                label=\"Categoria:\" label-for=\"article-categoryId\">\n                <b-form-select id=\"article-categoryId\"\n                    :options=\"categories\" v-model=\"article.categoryId\" />\n            </b-form-group>\n            <b-form-group v-if=\"mode === 'save'\" \n                label=\"Autor:\" label-for=\"article-userId\">\n                <b-form-select id=\"article-userId\"\n                    :options=\"users\" v-model=\"article.userId\" />\n            </b-form-group>\n            <b-form-group v-if=\"mode === 'save'\"\n                label=\"Conteúdo\" label-for=\"article-content\">\n                <VueEditor v-model=\"article.content\"\n                    placeholder=\"Informe o Conteúdo do Artigo...\" />\n            </b-form-group>\n            <b-button variant=\"primary\" v-if=\"mode === 'save'\"\n                @click=\"save\">Salvar</b-button>\n            <b-button variant=\"danger\" v-if=\"mode === 'remove'\"\n                @click=\"remove\">Excluir</b-button>\n            <b-button class=\"ml-2\" @click=\"reset\">Cancelar</b-button>\n        </b-form>\n        <hr>\n        <b-table hover striped :items=\"articles\" :fields=\"fields\">\n            <template slot=\"actions\" slot-scope=\"data\">\n                <b-button variant=\"warning\" @click=\"loadArticle(data.item)\" class=\"mr-2\">\n                    <i class=\"fa fa-pencil\"></i>\n                </b-button>\n                <b-button variant=\"danger\" @click=\"loadArticle(data.item, 'remove')\">\n                    <i class=\"fa fa-trash\"></i>\n                </b-button>\n            </template>\n        </b-table>\n        <b-pagination size=\"md\" v-model=\"page\" :total-rows=\"count\" :per-page=\"limit\" />\n    </div>\n</template>\n\n<script>\nimport { VueEditor } from \"vue2-editor\"\nimport { baseApiUrl, showError } from '@/global'\nimport axios from 'axios'\n\nexport default {\n    name: 'ArticleAdmin',\n    components: { VueEditor },\n    data: function() {\n        return {\n            mode: 'save',\n            article: {},\n            articles: [],\n            categories: [],\n            users: [],\n            page: 1,\n            limit: 0,\n            count: 0,\n            fields: [\n                { key: 'id', label: 'Código', sortable: true },\n                { key: 'name', label: 'Nome', sortable: true },\n                { key: 'description', label: 'Descrição', sortable: true },\n                { key: 'actions', label: 'Ações' }\n            ]\n        }\n    },\n    methods: {\n        loadArticles() {\n            const url = `${baseApiUrl}/articles?page=${this.page}`\n            axios.get(url).then(res => {\n                this.articles = res.data.data\n                this.count = res.data.count\n                this.limit = res.data.limit\n            })\n        },\n        reset() {\n            this.mode = 'save'\n            this.article = {}\n            this.loadArticles()\n        },\n        save() {\n            const method = this.article.id ? 'put' : 'post'\n            const id = this.article.id ? `/${this.article.id}` : ''\n            axios[method](`${baseApiUrl}/articles${id}`, this.article)\n                .then(() => {\n                    this.$toasted.global.defaultSuccess()\n                    this.reset()\n                })\n                .catch(showError)\n        },\n        remove() {\n            const id = this.article.id\n            axios.delete(`${baseApiUrl}/articles/${id}`)\n                .then(() => {\n                    this.$toasted.global.defaultSuccess()\n                    this.reset()\n                })\n                .catch(showError)\n        },\n        loadArticle(article, mode = 'save') {\n            this.mode = mode\n            axios.get(`${baseApiUrl}/articles/${article.id}`)\n                .then(res => this.article = res.data)\n        },\n        loadCategories() {\n            const url = `${baseApiUrl}/categories`\n            axios.get(url).then(res => {\n                this.categories = res.data.map(category => {\n                    return { value: category.id, text: category.path }\n                })\n            })\n        },\n        loadUsers() {\n            const url = `${baseApiUrl}/users`\n            axios.get(url).then(res => {\n                this.users = res.data.map(user => {\n                    return { value: user.id, text: `${user.name} - ${user.email}` }\n                })\n            })\n        }\n    },\n    watch: {\n        page() {\n            this.loadArticles()\n        }\n    },\n    mounted() {\n        this.loadUsers()\n        this.loadCategories()\n        this.loadArticles()\n    }\n}\n</script>\n\n<style>\n\n</style>"]}]}