{"remainingRequest":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/natalia/dev/tcc/projeto/frontend/src/components/admin/Problem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/natalia/dev/tcc/projeto/frontend/src/components/admin/Problem.vue","mtime":1572279992101},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGNhaXhhIGRlIGVkacOnw6NvCmltcG9ydCB7IFZ1ZUVkaXRvciB9IGZyb20gInZ1ZTItZWRpdG9yIjsKaW1wb3J0IHsgYmFzZUFwaVVybCwgc2hvd0Vycm9yIH0gZnJvbSAiQC9nbG9iYWwiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQcm9ibGVtIiwKICBjb21wb25lbnRzOiB7IFZ1ZUVkaXRvciB9LAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kZTogInNhdmUiLAogICAgICBwcm9ibGVtOiB7fSwKICAgICAgcHJvYmxlbXM6IFtdLAogICAgICBzb2Z0d2FyZXM6IFtdLAogICAgICB0eXBlczogW10sCiAgICAgIHBhZ2U6IDEsCiAgICAgIHBlclBhZ2U6IDAsCiAgICAgIHRvdGFsOiAwLAogICAgICBmaWVsZHM6IFsKICAgICAgICB7IGtleTogImlkIiwgbGFiZWw6ICJDw7NkaWdvIiwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogIm5hbWUiLCBsYWJlbDogIk5vbWUiLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAgIHsga2V5OiAic29mdHdhcmVfaWQiLCBsYWJlbDogIlNvZnR3YXJlIiwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogImFjdGlvbnMiLCBsYWJlbDogIkHDp8O1ZXMiIH0KICAgICAgXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWRQcm9ibGVtcygpIHsKICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUFwaVVybH0vcHJvYmxlbXM/cGFnZT0ke3RoaXMucGFnZX1gOwogICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5wcm9ibGVtcyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOwogICAgICAgIHRoaXMucGVyUGFnZSA9IHJlcy5kYXRhLnBlclBhZ2U7CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0KCkgewogICAgICB0aGlzLm1vZGUgPSAic2F2ZSI7CiAgICAgIHRoaXMucHJvYmxlbSA9IHt9OwogICAgICB0aGlzLmxvYWRQcm9ibGVtcygpOwogICAgfSwKICAgIHNhdmUoKSB7CiAgICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMucHJvYmxlbS5pZCA/ICJwdXQiIDogInBvc3QiOwogICAgICBjb25zdCBpZCA9IHRoaXMucHJvYmxlbS5pZCA/IGAvJHt0aGlzLnByb2JsZW0uaWR9YCA6ICIiOwogICAgICBheGlvc1ttZXRob2RdKGAke2Jhc2VBcGlVcmx9L3Byb2JsZW1zJHtpZH1gLCB0aGlzLnByb2JsZW0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kdG9hc3RlZC5nbG9iYWwuZGVmYXVsdFN1Y2Nlc3MoKTsKICAgICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChzaG93RXJyb3IpOwogICAgfSwKICAgIHJlbW92ZSgpIHsKICAgICAgY29uc3QgaWQgPSB0aGlzLnByb2JsZW0uaWQ7CiAgICAgIGF4aW9zCiAgICAgICAgLmRlbGV0ZShgJHtiYXNlQXBpVXJsfS9wcm9ibGVtcy8ke2lkfWApCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kdG9hc3RlZC5nbG9iYWwuZGVmYXVsdFN1Y2Nlc3MoKTsKICAgICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChzaG93RXJyb3IpOwogICAgfSwKICAgIGxvYWRQcm9ibGVtKHByb2JsZW0sIG1vZGUgPSAic2F2ZSIpIHsKICAgICAgdGhpcy5tb2RlID0gbW9kZTsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KGAke2Jhc2VBcGlVcmx9L3Byb2JsZW1zLyR7cHJvYmxlbS5pZH1gKQogICAgICAgIC50aGVuKHJlcyA9PiAodGhpcy5wcm9ibGVtID0gcmVzLmRhdGEpKTsKICAgIH0sCiAgICBsb2FkU29mdHdhcmVzKCkgewogICAgICBjb25zdCB1cmwgPSBgJHtiYXNlQXBpVXJsfS9zb2Z0d2FyZXNgOwogICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zb2Z0d2FyZXMgPSByZXMuZGF0YS5tYXAoc29mdHdhcmUgPT4gewogICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHNvZnR3YXJlLmlkLCB0ZXh0OiBgJHtzb2Z0d2FyZS5uYW1lfSBgIH07CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGxvYWRUeXBlcygpIHsKICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUFwaVVybH0vdHlwZXNgOwogICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy50eXBlcyA9IHJlcy5kYXRhLm1hcCh0eXBlID0+IHsKICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB0eXBlLmlkLCB0ZXh0OiBgJHt0eXBlLm5hbWV9IGAgfTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgcGFnZSgpIHsKICAgICAgdGhpcy5sb2FkUHJvYmxlbXMoKTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRTb2Z0d2FyZXMoKTsKICAgIHRoaXMubG9hZFByb2JsZW1zKCk7CiAgICB0aGlzLmxvYWRUeXBlcygpOwogIH0KfTsK"},{"version":3,"sources":["Problem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Problem.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n  <div class=\"article-admin\">\n    <b-form>\n      <input id=\"article-id\" type=\"hidden\" v-model=\"problem.id\" />\n      <b-row>\n        <b-col xs=\"12\">\n          <b-form-group label=\"Nome:\" label-for=\"problem-name\">\n            <b-form-input\n              id=\"problem-name\"\n              type=\"text\"\n              v-model=\"problem.name\"\n              required\n              :readonly=\"mode === 'remove'\"\n              placeholder=\"Informe o Nome do Erro...\"\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group v-if=\"mode === 'save'\" label=\"Software:\" label-for=\"problem-software_id\">\n            <b-form-select\n              id=\"problem-software_id\"\n              :options=\"softwares\"\n              v-model=\"problem.software_id\"\n            />\n          </b-form-group>\n        </b-col>\n\n        <b-col md=\"6\" sm=\"12\">\n          <b-form-group v-if=\"mode === 'save'\" label=\"Tipo:\" label-for=\"problem-type_id\">\n            <b-form-select id=\"problem-type_id\" :options=\"types\" v-model=\"problem.type_id\" />\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <b-form-group v-if=\"mode === 'save'\" label=\"Solução\" label-for=\"problem-content\">\n        <VueEditor v-model=\"problem.solucao\" placeholder=\"Informe as possiveis soluções...\" />\n      </b-form-group>\n      <b-button variant=\"primary\" v-if=\"mode === 'save'\" @click=\"save\">Salvar</b-button>\n      <b-button variant=\"danger\" v-if=\"mode === 'remove'\" @click=\"remove\">Excluir</b-button>\n      <b-button class=\"ml-2\" @click=\"reset\">Cancelar</b-button>\n    </b-form>\n    <hr />\n    <b-table hover striped :items=\"problems\" :fields=\"fields\">\n      <template slot=\"actions\" slot-scope=\"data\">\n        <b-button variant=\"warning\" @click=\"loadProblem(data.item)\" class=\"mr-2\">\n          <i class=\"fas fa-edit\"></i>\n        </b-button>\n        <b-button variant=\"danger\" @click=\"loadProblem(data.item, 'remove')\">\n          <i class=\"fa fa-trash\"></i>\n        </b-button>\n      </template>\n    </b-table>\n    <b-pagination size=\"md\" v-model=\"page\" :total-rows=\"total\" :per-page=\"perPage\" />\n  </div>\n</template>\n\n<script>\n// caixa de edição\nimport { VueEditor } from \"vue2-editor\";\nimport { baseApiUrl, showError } from \"@/global\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"Problem\",\n  components: { VueEditor },\n  data: function() {\n    return {\n      mode: \"save\",\n      problem: {},\n      problems: [],\n      softwares: [],\n      types: [],\n      page: 1,\n      perPage: 0,\n      total: 0,\n      fields: [\n        { key: \"id\", label: \"Código\", sortable: true },\n        { key: \"name\", label: \"Nome\", sortable: true },\n        { key: \"software_id\", label: \"Software\", sortable: true },\n        { key: \"actions\", label: \"Ações\" }\n      ]\n    };\n  },\n  methods: {\n    loadProblems() {\n      const url = `${baseApiUrl}/problems?page=${this.page}`;\n      axios.get(url).then(res => {\n        this.problems = res.data.data;\n        this.total = res.data.total;\n        this.perPage = res.data.perPage;\n      });\n    },\n    reset() {\n      this.mode = \"save\";\n      this.problem = {};\n      this.loadProblems();\n    },\n    save() {\n      const method = this.problem.id ? \"put\" : \"post\";\n      const id = this.problem.id ? `/${this.problem.id}` : \"\";\n      axios[method](`${baseApiUrl}/problems${id}`, this.problem)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    remove() {\n      const id = this.problem.id;\n      axios\n        .delete(`${baseApiUrl}/problems/${id}`)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    loadProblem(problem, mode = \"save\") {\n      this.mode = mode;\n      axios\n        .get(`${baseApiUrl}/problems/${problem.id}`)\n        .then(res => (this.problem = res.data));\n    },\n    loadSoftwares() {\n      const url = `${baseApiUrl}/softwares`;\n      axios.get(url).then(res => {\n        this.softwares = res.data.map(software => {\n          return { value: software.id, text: `${software.name} ` };\n        });\n      });\n    },\n    loadTypes() {\n      const url = `${baseApiUrl}/types`;\n      axios.get(url).then(res => {\n        this.types = res.data.map(type => {\n          return { value: type.id, text: `${type.name} ` };\n        });\n      });\n    }\n  },\n  watch: {\n    page() {\n      this.loadProblems();\n    }\n  },\n  mounted() {\n    this.loadSoftwares();\n    this.loadProblems();\n    this.loadTypes();\n  }\n};\n</script>\n\n<style>\n</style>"]}]}