{"remainingRequest":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/natalia/dev/tcc/projeto/frontend/src/components/ticket/CadTicket.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/natalia/dev/tcc/projeto/frontend/src/components/ticket/CadTicket.vue","mtime":1572453910881},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/natalia/dev/tcc/projeto/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJhc2VBcGlVcmwsIHNob3dFcnJvciB9IGZyb20gJ0AvZ2xvYmFsJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCgoKLy8gY2FpeGEgZGUgZWRpw6fDo28gZGEgc29sdcOnw6NvCmltcG9ydCB7IFZ1ZUVkaXRvciB9IGZyb20gInZ1ZTItZWRpdG9yIjsKCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInRpY2tldCIsCiAgY29tcG9uZW50czogeyBWdWVFZGl0b3IgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIG1vZGU6ICJzYXZlIiwKICAgICAgdGlja2V0OiB7fSwKICAgICAgdGlja2V0czogW10sCiAgICAgIHNvZnR3YXJlczogW10sCiAgICAgIGNsaWVudHM6IFtdLAogICAgICB1c2VyczogW10sCiAgICAgIHByb2JsZW1zOiBbXSwKICAgICAgdGVzdGU6IFsnaXNzbyDDqSB1bSBjbGllbnRlJywgJ2NsaWVudGUgMicsICdjbGllbnRlNCddLAogICAgICAvLyBwYWdpbmHDp8OjbwogICAgICBwYWdlOiAxLAogICAgICBwZXJQYWdlOiAwLAogICAgICB0b3RhbDogMCwKICAgICAgLy8gY2FiZcOnYWxobyBkYSB0YWJlbGEKICAgICAgZmllbGRzOiBbCiAgICAgICAgeyBrZXk6ICJpZCIsIGxhYmVsOiAiQ8OzZGlnbyIsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJjbGllbnRJZCIsIGxhYmVsOiAiQ2xpZW50ZSIsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyBrZXk6ICJwcm9ibGVtSWQiLCBsYWJlbDogIlByb2JsZW1hIiwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogInN0YXR1cyIsIGxhYmVsOiAiU3RhdHVzIiwgc29ydGFibGU6IHRydWUgfSwKICAgICAgICB7IGtleTogImFjdGlvbnMiLCBsYWJlbDogIkHDp8O1ZXMiIH0KICAgICAgXSwKICAgICAgc3RhdHVzOiBbICdQRU5ERU5URScsICdSRVNPTFZJRE8nXSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkVGlja2V0cygpIHsKICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUFwaVVybH0vdGlja2V0cz9wYWdlPSR7dGhpcy5wYWdlfWA7CiAgICAgIGF4aW9zLmdldCh1cmwpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnRpY2tldHMgPSByZXMuZGF0YS5kYXRhOwogICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICB0aGlzLnBlclBhZ2UgPSByZXMuZGF0YS5wZXJQYWdlOwogICAgICB9KTsKICAgIH0sCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5tb2RlID0gInNhdmUiOwogICAgICB0aGlzLnRpY2tldCA9IHt9OwogICAgICB0aGlzLmxvYWR0aWNrZXRzKCk7CiAgICB9LAogICAgc2F2ZSgpIHsKICAgICAgY29uc3QgbWV0aG9kID0gdGhpcy50aWNrZXQuaWQgPyAicHV0IiA6ICJwb3N0IjsKICAgICAgY29uc3QgaWQgPSB0aGlzLnRpY2tldC5pZCA/IGAvJHt0aGlzLnRpY2tldC5pZH1gIDogIiI7CiAgICAgIGF4aW9zW21ldGhvZF0oYCR7YmFzZUFwaVVybH0vdGlja2V0cyR7aWR9YCwgdGhpcy50aWNrZXQpCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kdG9hc3RlZC5nbG9iYWwuZGVmYXVsdFN1Y2Nlc3MoKTsKICAgICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChzaG93RXJyb3IpOwogICAgfSwKICAgIHJlbW92ZSgpIHsKICAgICAgY29uc3QgaWQgPSB0aGlzLnRpY2tldC5pZDsKICAgICAgYXhpb3MKICAgICAgICAuZGVsZXRlKGAke2Jhc2VBcGlVcmx9L3RpY2tldHMvJHtpZH1gKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZ2xvYmFsLmRlZmF1bHRTdWNjZXNzKCk7CiAgICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goc2hvd0Vycm9yKTsKICAgIH0sCiAgICBsb2FkVGlja2V0KHRpY2tldCwgbW9kZSA9ICJzYXZlIikgewogICAgICB0aGlzLm1vZGUgPSBtb2RlOwogICAgICBheGlvcwogICAgICAgIC5nZXQoYCR7YmFzZUFwaVVybH0vdGlja2V0cy8ke3RpY2tldC5pZH1gKQogICAgICAgIC50aGVuKHJlcyA9PiAodGhpcy50aWNrZXQgPSByZXMuZGF0YSkpOwogICAgfSwKICAgIGxvYWRTb2Z0d2FyZXMoKSB7CiAgICAgIGNvbnN0IHVybCA9IGAke2Jhc2VBcGlVcmx9L3NvZnR3YXJlc0xpc3RgCiAgICAgIGF4aW9zLmdldCh1cmwpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnNvZnR3YXJlcyA9IHJlcy5kYXRhLm1hcChzb2Z0d2FyZSA9PiB7CiAgICAgICAgICByZXR1cm4geyB2YWx1ZTogc29mdHdhcmUuaWQsIHRleHQ6IGAke3NvZnR3YXJlLm5hbWVTb2Z0d2FyZX0gYCB9CiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBsb2FkQ2xpZW50cygpIHsKICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUFwaVVybH0vY2xpZW50c0xpc3RgOwogICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5jbGllbnRzID0gcmVzLmRhdGEubWFwKGNsaWVudCA9PiB7CiAgICAgICAgICByZXR1cm4geyB2YWx1ZTogY2xpZW50LmlkLCB0ZXh0OiBgJHtjbGllbnQucmF6YW9Tb2NpYWx9IGAgfQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgbG9hZFByb2JsZW1zKCkgewogICAgICBjb25zdCB1cmwgPSBgJHtiYXNlQXBpVXJsfS9wcm9ibGVtc0xpc3RgOwogICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5wcm9ibGVtcyA9IHJlcy5kYXRhLm1hcChwcm9ibGVtID0+IHsKICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBwcm9ibGVtLmlkLCB0ZXh0OiBgJHtwcm9ibGVtLmRlc2NyaXB0aW9ufSBgIH0KICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIGxvYWRVc2VycygpIHsKICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUFwaVVybH0vdXNlcnNMaXN0YDsKICAgICAgYXhpb3MuZ2V0KHVybCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudXNlcnMgPSByZXMuZGF0YS5tYXAodXNlciA9PiB7CiAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdXNlci5pZCwgdGV4dDogYCR7dXNlci5uYW1lfSBgIH07CiAgICAgICAgfSkKICAgICAgfSkKICAgIH0KICB9LAogIAogIHdhdGNoOiB7CiAgICBwYWdlKCkgewogICAgICB0aGlzLmxvYWRUaWNrZXRzKCk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkU29mdHdhcmVzKCkKICAgIHRoaXMubG9hZFRpY2tldHMoKQogICAgdGhpcy5sb2FkQ2xpZW50cygpCiAgICB0aGlzLmxvYWRQcm9ibGVtcygpCiAgICB0aGlzLmxvYWRVc2VycygpCiAgfQp9Owo="},{"version":3,"sources":["CadTicket.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4JA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CadTicket.vue","sourceRoot":"src/components/ticket","sourcesContent":["<template>\n  <div class=\"ticket\">\n    <b-form>\n      <input id=\"ticket-id\" type=\"hidden\" v-model=\"ticket.id\" />\n\n      <!---- Input do Cliente ---->\n      <b-row>\n        <b-col md=\"6\" sm=\"12\">\n         <b-form-group label=\"Cliente:\" label-for=\"ticket-cliente\" >\n          <v-select :options=\"clients\" \n             :readonly=\"mode === 'remove'\">{{ clientes }}\n            </v-select>\n          </b-form-group>\n           </b-col> \n\n\n          <!-- <b-form-group label=\"Cliente:\" label-for=\"ticket-cliente\">\n            <b-form-input\n            list=\"input-client\"\n            placeholder=\"Selecione o Cliente...\"\n            :readonly=\"mode === 'remove'\">\n            </b-form-input>\n\n            <b-form-datalist\n            :options=\"clients\">\n            </b-form-datalist>\n          </b-form-group>\n        </b-col> -->\n\n        <!----- Input da Data ---->\n        <b-col md=\"3\" sm=\"12\">\n          <b-form-group\n           v-if=\"mode === 'save'\"\n           label=\"Data:\"\n           label-for=\"ticket-date\"\n           >\n\n            <b-form-input\n            id=\"type-date\"\n            type=\"date\"\n            class=\"form-control\"\n            :readonly=\"mode === 'remove'\"\n            >\n            </b-form-input>\n          </b-form-group>\n        </b-col>\n\n      <!----- Input do Status ---->\n        <b-col md=\"3\" sm=\"12\">\n          <b-form-group\n           label=\"Status:\"\n           label-for=\"ticket-status\">\n\n          <b-form-select\n            id=\"ticket-status\"\n            :options=\"status\"\n           v-model=\"ticket.status\"\n           :readonly=\"mode === 'remove'\"\n            />\n          </b-form-group>\n        </b-col>\n      </b-row>\n\n      <!----- Input do Problema ---->\n      <b-row>\n        <b-col md=\"4\" sm=\"12\">\n          <b-form-group\n           v-if=\"mode === 'save'\"\n            label=\"Problema:\"\n            label-for=\"ticket-problemId\">\n\n           <b-form-select id=\"ticket-problemId\"\n            :options=\"problems\"\n            v-model=\"ticket.problemId\">\n            </b-form-select>\n          </b-form-group>\n        </b-col>\n\n          <!----- Input do software---->\n         <b-col md=\"3\" sm=\"12\">\n          <b-form-group\n          v-if=\"mode === 'save'\"\n          label=\"Software:\"\n          label-for=\"ticket-softwareId\">\n\n        <b-form-select\n          id=\"ticket-softwareId\"\n          :options=\"softwares\"\n          v-model=\"ticket.softwareId\" />\n          </b-form-group>\n        </b-col>\n       <!----- Input do Solicitante ---->\n        <b-col md=\"3\" sm=\"12\">\n          <b-form-group\n          v-if=\"mode === 'save'\"\n          label=\"Solicitante:\"\n          label-for=\"ticket-solicitante\">\n\n        <b-form-input\n          id=\"ticket-solicitante\"\n          v-model=\"ticket.solicitante\" />\n          </b-form-group>\n        </b-col>\n\n        <!----- Input do Atendente ---->\n        <b-col md=\"2\" sm=\"12\">\n          <b-form-group\n          v-if=\"mode === 'save'\"\n          label=\"Atendente:\"\n          label-for=\"ticket-userId\">\n\n        <b-form-select\n          id=\"ticket-user_id\"\n          :options=\"users\"\n          v-model=\"ticket.userId\" />\n          </b-form-group>\n        </b-col>\n      </b-row>\n\n        <!----- Input da Solucao---->\n      <b-form-group\n         v-if=\"mode === 'save'\"\n         label=\"Solução\"\n         label-for=\"ticket-content\">\n\n        <VueEditor v-model=\"ticket.solucao\"\n        placeholder=\"Informe a Solução...\" />\n      </b-form-group>\n\n         <!----- Botões de salvar, remover e cancelar ---->\n      <b-button variant=\"primary\" v-if=\"mode === 'save'\" @click=\"save\">Salvar</b-button>\n      <b-button variant=\"danger\" v-if=\"mode === 'remove'\" @click=\"remove\">Excluir</b-button>\n      <b-button class=\"ml-2\" @click=\"reset\">Cancelar</b-button>\n    </b-form>\n\n    <!----- linha separando formulario e as tabelas ---->\n    <hr />\n    <!----- tabelas ---->\n    <b-table hover striped :items=\"tickets\" :fields=\"fields\">\n      <template slot=\"actions\" slot-scope=\"data\">\n\n        <!-- botões de alterar da tabela -->\n        <b-button variant=\"warning\" @click=\"loadticket(data.item)\" class=\"mr-2\">\n         <i class=\"fas fa-edit\"></i>\n        </b-button>\n        <b-button variant=\"danger\" @click=\"loadticket(data.item, 'remove')\">\n          <i class=\"fas fa-trash\"></i> \n        </b-button>\n      </template>\n    </b-table>\n      <!-- paginação -->\n    <b-pagination size=\"md\" v-model=\"page\" :total-rows=\"total\" :per-page=\"perPage\" />\n  </div>\n</template>\n\n<script>\nimport { baseApiUrl, showError } from '@/global'\nimport axios from 'axios'\n\n\n// caixa de edição da solução\nimport { VueEditor } from \"vue2-editor\";\n\n\nexport default {\n  name: \"ticket\",\n  components: { VueEditor },\n  data: function() {\n    return {\n      mode: \"save\",\n      ticket: {},\n      tickets: [],\n      softwares: [],\n      clients: [],\n      users: [],\n      problems: [],\n      teste: ['isso é um cliente', 'cliente 2', 'cliente4'],\n      // paginação\n      page: 1,\n      perPage: 0,\n      total: 0,\n      // cabeçalho da tabela\n      fields: [\n        { key: \"id\", label: \"Código\", sortable: true },\n        { key: \"clientId\", label: \"Cliente\", sortable: true },\n        { key: \"problemId\", label: \"Problema\", sortable: true },\n        { key: \"status\", label: \"Status\", sortable: true },\n        { key: \"actions\", label: \"Ações\" }\n      ],\n      status: [ 'PENDENTE', 'RESOLVIDO'],\n    };\n  },\n  methods: {\n    loadTickets() {\n      const url = `${baseApiUrl}/tickets?page=${this.page}`;\n      axios.get(url).then(res => {\n        this.tickets = res.data.data;\n        this.total = res.data.total;\n        this.perPage = res.data.perPage;\n      });\n    },\n    reset() {\n      this.mode = \"save\";\n      this.ticket = {};\n      this.loadtickets();\n    },\n    save() {\n      const method = this.ticket.id ? \"put\" : \"post\";\n      const id = this.ticket.id ? `/${this.ticket.id}` : \"\";\n      axios[method](`${baseApiUrl}/tickets${id}`, this.ticket)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    remove() {\n      const id = this.ticket.id;\n      axios\n        .delete(`${baseApiUrl}/tickets/${id}`)\n        .then(() => {\n          this.$toasted.global.defaultSuccess();\n          this.reset();\n        })\n        .catch(showError);\n    },\n    loadTicket(ticket, mode = \"save\") {\n      this.mode = mode;\n      axios\n        .get(`${baseApiUrl}/tickets/${ticket.id}`)\n        .then(res => (this.ticket = res.data));\n    },\n    loadSoftwares() {\n      const url = `${baseApiUrl}/softwaresList`\n      axios.get(url).then(res => {\n        this.softwares = res.data.map(software => {\n          return { value: software.id, text: `${software.nameSoftware} ` }\n        })\n      })\n    },\n    loadClients() {\n      const url = `${baseApiUrl}/clientsList`;\n      axios.get(url).then(res => {\n        this.clients = res.data.map(client => {\n          return { value: client.id, text: `${client.razaoSocial} ` }\n        })\n      })\n    },\n    loadProblems() {\n      const url = `${baseApiUrl}/problemsList`;\n      axios.get(url).then(res => {\n        this.problems = res.data.map(problem => {\n          return { value: problem.id, text: `${problem.description} ` }\n        })\n      })\n    },\n    loadUsers() {\n      const url = `${baseApiUrl}/usersList`;\n      axios.get(url).then(res => {\n        this.users = res.data.map(user => {\n          return { value: user.id, text: `${user.name} ` };\n        })\n      })\n    }\n  },\n  \n  watch: {\n    page() {\n      this.loadTickets();\n    }\n  },\n  mounted() {\n    this.loadSoftwares()\n    this.loadTickets()\n    this.loadClients()\n    this.loadProblems()\n    this.loadUsers()\n  }\n};\n</script>\n\n<style>\n</style>\n"]}]}